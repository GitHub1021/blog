<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="以梦为马，明日天涯">
<meta property="og:type" content="website">
<meta property="og:title" content="冯玮的博客">
<meta property="og:url" content="http://example.com/index.html">
<meta property="og:site_name" content="冯玮的博客">
<meta property="og:description" content="以梦为马，明日天涯">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="冯玮">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>冯玮的博客</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">冯玮的博客</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">码农</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-主页">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>主页</a>

  </li>
        <li class="menu-item menu-item-主题">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>主题</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/11/06/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="冯玮">
      <meta itemprop="description" content="以梦为马，明日天涯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冯玮的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/06/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">设计模式-适配器模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-06 08:44:32 / 修改时间：08:45:04" itemprop="dateCreated datePublished" datetime="2020-11-06T08:44:32+08:00">2020-11-06</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="适配器模式"><a href="#适配器模式" class="headerlink" title="适配器模式"></a>适配器模式</h1><h2 id="案例场景"><a href="#案例场景" class="headerlink" title="案例场景"></a>案例场景</h2><p> 随着公司业务的不断发展,当基础的系统逐步成型以后,业务运营就需要开始做用户的拉新和促活.从而保障<code>DUA</code>的增速以及最终<code>ROI</code>转换</p>
<p>而这时候就会需要做一些营销系统,大部分常见的都是裂变.拉客,例如:你邀请一个用户开户,或者邀请一个用户下单,那么平台就会给你返利,多邀多得,同事随着拉新的 量越来越多开始设置每月下单都会给首单奖励等等买各种营销场景</p>
<p>那么这个时候会做一个系统就会接收各种各样的MQ消息或者接口,如果一个个的去开发,就会耗费很大的成本,同事对于后期的拓展也有一定的难度,此时就会希望有一个系统可以配置一下就把外部的MQ接入进行,这些MQ就像上面提到的可能是 一些注册开户信息,商品下单消息等等</p>
<p>而适配器的思想方式也恰恰可以御用到这里,并且我想强调 一下,适配器不只是可以适配接口往往还可以适配一些属性信息.</p>
<p>1.场景模拟工程</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">itstack-demo-design-6-00</span><br><span class="line">└── src</span><br><span class="line">    └── main</span><br><span class="line">        └── java</span><br><span class="line">            └── org.itstack.demo.design</span><br><span class="line">                ├── mq</span><br><span class="line">                │   ├── create_account.java</span><br><span class="line">                │   ├── OrderMq.java</span><br><span class="line">                │   └── POPOrderDelivered.java</span><br><span class="line">                └── service</span><br><span class="line">                    ├── OrderServicejava</span><br><span class="line">                    └── POPOrderService.java</span><br></pre></td></tr></table></figure>

<ul>
<li>这里模拟了三个不同类型的MQ消息,而在消息体中都有一些必要的字段,比如用户ID,时间,业务id.但每个MQ消息的字段属性并不一样.就像用户id在不同的MQ里也有不同的字段:uid,userid等</li>
<li>同时还提供了两个不同类型的接口,一个用于查询内部订单下单数量,一个 用于第三方是否首单</li>
<li>后面会把这些不同类型的MQ和接口做适配兼容</li>
</ul>
<p>2.场景简述</p>
<p>注册开户MQ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">create_account</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String number;      <span class="comment">// 开户编号</span></span><br><span class="line">    <span class="keyword">private</span> String address;     <span class="comment">// 开户地</span></span><br><span class="line">    <span class="keyword">private</span> Date accountDate;   <span class="comment">// 开户时间</span></span><br><span class="line">    <span class="keyword">private</span> String desc;        <span class="comment">// 开户描述</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ... get/set     </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>内部订单MQ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderMq</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String uid;           <span class="comment">// 用户ID</span></span><br><span class="line">    <span class="keyword">private</span> String sku;           <span class="comment">// 商品</span></span><br><span class="line">    <span class="keyword">private</span> String orderId;       <span class="comment">// 订单ID</span></span><br><span class="line">    <span class="keyword">private</span> Date createOrderTime; <span class="comment">// 下单时间     </span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ... get/set      </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>第三方订单MQ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">POPOrderDelivered</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String uId;     <span class="comment">// 用户ID</span></span><br><span class="line">    <span class="keyword">private</span> String orderId; <span class="comment">// 订单号</span></span><br><span class="line">    <span class="keyword">private</span> Date orderTime; <span class="comment">// 下单时间</span></span><br><span class="line">    <span class="keyword">private</span> Date sku;       <span class="comment">// 商品</span></span><br><span class="line">    <span class="keyword">private</span> Date skuName;   <span class="comment">// 商品名称</span></span><br><span class="line">    <span class="keyword">private</span> BigDecimal decimal; <span class="comment">// 金额</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// ... get/set      </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>查询用户内部下单数量接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Logger logger = LoggerFactory.getLogger(POPOrderService.class);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">long</span> <span class="title">queryUserOrderCount</span><span class="params">(String userId)</span></span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;自营商家，查询用户的订单是否为首单：&#123;&#125;&quot;</span>, userId);</span><br><span class="line">        <span class="keyword">return</span> <span class="number">10L</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>查询用户第三方下单首单接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">POPOrderService</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Logger logger = LoggerFactory.getLogger(POPOrderService.class);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isFirstOrder</span><span class="params">(String uId)</span> </span>&#123;</span><br><span class="line">        logger.info(<span class="string">&quot;POP商家，查询用户的订单是否为首单：&#123;&#125;&quot;</span>, uId);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>以上这几项就是不同MQ以及不同的 接口的一个体现,后面我们将使用这样的MQ消息和接口给他们做相应的适配</li>
</ul>
<h2 id="适配器模式构造代码"><a href="#适配器模式构造代码" class="headerlink" title="适配器模式构造代码"></a>适配器模式构造代码</h2><p> 统一的MQ消息体适配器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RebateInfo</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String userId;  <span class="comment">// 用户ID</span></span><br><span class="line">    <span class="keyword">private</span> String bizId;   <span class="comment">// 业务ID</span></span><br><span class="line">    <span class="keyword">private</span> Date bizTime;   <span class="comment">// 业务时间</span></span><br><span class="line">    <span class="keyword">private</span> String desc;    <span class="comment">// 业务描述</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// ... get/set</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>MQ消息中会有多种多样的类型属性,虽然他们都有同样的值提供给适用方,但是如果都这样接入那么当MQ消息特别多的时候就会很麻烦</li>
<li>所以在这个 案例中,我们定义了通用的MQ消息体,后续把所有接入进来的消息进行统一的处理</li>
</ul>
<p>MQ消息体适配器</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MQAdapter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> RebateInfo <span class="title">filter</span><span class="params">(String strJson, Map&lt;String, String&gt; link)</span> <span class="keyword">throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> filter(JSON.parseObject(strJson, Map.class), link);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> RebateInfo <span class="title">filter</span><span class="params">(Map obj, Map&lt;String, String&gt; link)</span> <span class="keyword">throws</span> NoSuchMethodException, InvocationTargetException, IllegalAccessException </span>&#123;</span><br><span class="line">        RebateInfo rebateInfo = <span class="keyword">new</span> RebateInfo();</span><br><span class="line">        <span class="keyword">for</span> (String key : link.keySet()) &#123;</span><br><span class="line">            Object val = obj.get(link.get(key));</span><br><span class="line">            RebateInfo.class.getMethod(<span class="string">&quot;set&quot;</span> + key.substring(<span class="number">0</span>, <span class="number">1</span>).toUpperCase() + key.substring(<span class="number">1</span>), String.class).invoke(rebateInfo, val.toString());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> rebateInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>这个类中的方法非常的重要,主要 用于把不同类型的MQ的各种属性映射成我们需要的属性并返回,.就像用户id.uid ,映射成我们需要的userid 做统一处理</p>
</li>
<li><p>而在这个处理过程中需要把映射管理传递给<code>Map&lt;String,String&gt; link</code>,就是准确的描述了,当前MQ中某个属性的名称,映射为我们的某个属性名称</p>
</li>
<li><p>最终因为我们接受到的mq消息基本都是json格式,可以转换为map格式,最后使用反射调用的方式给我们的类型赋值</p>
<p>测试适配类</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test_MQAdapter</span><span class="params">()</span> <span class="keyword">throws</span> NoSuchMethodException, IllegalAccessException, InvocationTargetException </span>&#123;</span><br><span class="line">    create_account create_account = <span class="keyword">new</span> create_account();</span><br><span class="line">    create_account.setNumber(<span class="string">&quot;100001&quot;</span>);</span><br><span class="line">    create_account.setAddress(<span class="string">&quot;河北省.廊坊市.广阳区.大学里职业技术学院&quot;</span>);</span><br><span class="line">    create_account.setAccountDate(<span class="keyword">new</span> Date());</span><br><span class="line">    create_account.setDesc(<span class="string">&quot;在校开户&quot;</span>);          </span><br><span class="line"></span><br><span class="line">    HashMap&lt;String, String&gt; link01 = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">    link01.put(<span class="string">&quot;userId&quot;</span>, <span class="string">&quot;number&quot;</span>);</span><br><span class="line">    link01.put(<span class="string">&quot;bizId&quot;</span>, <span class="string">&quot;number&quot;</span>);</span><br><span class="line">    link01.put(<span class="string">&quot;bizTime&quot;</span>, <span class="string">&quot;accountDate&quot;</span>);</span><br><span class="line">    link01.put(<span class="string">&quot;desc&quot;</span>, <span class="string">&quot;desc&quot;</span>);</span><br><span class="line">    RebateInfo rebateInfo01 = MQAdapter.filter(create_account.toString(), link01);</span><br><span class="line">    System.out.println(<span class="string">&quot;mq.create_account(适配前)&quot;</span> + create_account.toString());</span><br><span class="line">    System.out.println(<span class="string">&quot;mq.create_account(适配后)&quot;</span> + JSON.toJSONString(rebateInfo01));</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    OrderMq orderMq = <span class="keyword">new</span> OrderMq();</span><br><span class="line">    orderMq.setUid(<span class="string">&quot;100001&quot;</span>);</span><br><span class="line">    orderMq.setSku(<span class="string">&quot;10928092093111123&quot;</span>);</span><br><span class="line">    orderMq.setOrderId(<span class="string">&quot;100000890193847111&quot;</span>);</span><br><span class="line">    orderMq.setCreateOrderTime(<span class="keyword">new</span> Date()); </span><br><span class="line"></span><br><span class="line">    HashMap&lt;String, String&gt; link02 = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">    link02.put(<span class="string">&quot;userId&quot;</span>, <span class="string">&quot;uid&quot;</span>);</span><br><span class="line">    link02.put(<span class="string">&quot;bizId&quot;</span>, <span class="string">&quot;orderId&quot;</span>);</span><br><span class="line">    link02.put(<span class="string">&quot;bizTime&quot;</span>, <span class="string">&quot;createOrderTime&quot;</span>);</span><br><span class="line">    RebateInfo rebateInfo02 = MQAdapter.filter(orderMq.toString(), link02);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;mq.orderMq(适配前)&quot;</span> + orderMq.toString());</span><br><span class="line">    System.out.println(<span class="string">&quot;mq.orderMq(适配后)&quot;</span> + JSON.toJSONString(rebateInfo02));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>在这里我们分别模拟传入了两个不同的MQ消息，并设置字段的映射关系。</li>
<li>等真的业务场景开发中，就可以配这种映射配置关系交给配置文件或者数据库后台配置，减少编码。</li>
</ul>
<p>测试结果</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mq.create_account(适配前)&#123;<span class="string">&quot;accountDate&quot;</span>:<span class="number">1591024816000</span>,<span class="string">&quot;address&quot;</span>:<span class="string">&quot;河北省.廊坊市.广阳区.大学里职业技术学院&quot;</span>,<span class="string">&quot;desc&quot;</span>:<span class="string">&quot;在校开户&quot;</span>,<span class="string">&quot;number&quot;</span>:<span class="string">&quot;100001&quot;</span>&#125;</span><br><span class="line">mq.create_account(适配后)&#123;<span class="string">&quot;bizId&quot;</span>:<span class="string">&quot;100001&quot;</span>,<span class="string">&quot;bizTime&quot;</span>:<span class="number">1591077840669</span>,<span class="string">&quot;desc&quot;</span>:<span class="string">&quot;在校开户&quot;</span>,<span class="string">&quot;userId&quot;</span>:<span class="string">&quot;100001&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">mq.orderMq(适配前)&#123;<span class="string">&quot;createOrderTime&quot;</span>:<span class="number">1591024816000</span>,<span class="string">&quot;orderId&quot;</span>:<span class="string">&quot;100000890193847111&quot;</span>,<span class="string">&quot;sku&quot;</span>:<span class="string">&quot;10928092093111123&quot;</span>,<span class="string">&quot;uid&quot;</span>:<span class="string">&quot;100001&quot;</span>&#125;</span><br><span class="line">mq.orderMq(适配后)&#123;<span class="string">&quot;bizId&quot;</span>:<span class="string">&quot;100000890193847111&quot;</span>,<span class="string">&quot;bizTime&quot;</span>:<span class="number">1591077840669</span>,<span class="string">&quot;userId&quot;</span>:<span class="string">&quot;100001&quot;</span>&#125;</span><br><span class="line"></span><br><span class="line">Process finished with exit code <span class="number">0</span></span><br></pre></td></tr></table></figure>

<ul>
<li>从上面可以看到，同样的字段值在做了适配前后分别有统一的字段属性，进行处理。这样业务开发中也就非常简单了。</li>
<li>另外有一个非常重要的地方，在实际业务开发中，除了反射的使用外，还可以加入<strong>代理类</strong>把映射的配置交给它。这样就可以不需要每一个mq都手动创建类了。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/11/04/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="冯玮">
      <meta itemprop="description" content="以梦为马，明日天涯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冯玮的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/04/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">设计模式-单例模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-04 17:24:32 / 修改时间：17:24:50" itemprop="dateCreated datePublished" datetime="2020-11-04T17:24:32+08:00">2020-11-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>设计模式—-单例模式</strong></p>
<p><strong>单例模式介绍</strong></p>
<p>单例模式是整个设计模式中最简单的模式之一,而且这种方式即使在没有看设计模式相关资料也会常用在编码开发中.</p>
<p>因为在编程开发中经常会遇到这样一种场景,那就是需要保证一个类只有一个实例哪怕是多线程同时访问,并需要提供一个全局访问此实例的点</p>
<p>综合以上.我们平常的开发中,可以总结一条经验,单例模式主要解决的是,一个全局使用的类频繁的创建和消费,从而提升整体的代码的性能</p>
<p><strong>案例场景</strong></p>
<p>例如</p>
<ol>
<li>数据库的连接池不会反复创建</li>
<li>spring中的一个单例模式bean的生成和使用</li>
<li>在我们平常的代码中需要设置全局的一些属性保存</li>
</ol>
<p><strong>7种单例模式实现</strong></p>
<p>单例模式的实现方式比较多,主要实现上是是否支持懒汉模式,是否线程安全中运用各种技巧,当然也有 一些场景不需要考虑懒加载也就是懒汉模式的情况下,会直接使用<code>static</code>静态类或属性和方法的方式进行处理,供外部调用</p>
<p>以下就是7种单例模式的实现方式</p>
<p><strong>0.静态类使用</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton_00</span></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Map&lt;Stirng,String&gt; cache = <span class="keyword">new</span> ConcurrentHashMap&lt;String,String&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>以上这种方式在我们平常的业务开发中非常场常见，这样静态类的方式可以在第一次运行的时候直接初始化Map类，同时这里我们也不需要到延迟加载在使用。</li>
<li>在不需要维持任何状态下，仅仅用于全局访问，这个使用使用静态类的方式更加方便。</li>
<li>但如果需要被继承以及需要维持一些特定状态的情况下，就适合使用单例模式。</li>
</ul>
<p><strong>1.懒汉模式(线程不安全)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton_01</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Static Singleton_01 instance;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton_01</span><span class="params">()</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton_01 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> !=  instance)&#123;</span><br><span class="line">            <span class="keyword">return</span> instance</span><br><span class="line">        &#125;</span><br><span class="line">        instance = <span class="keyword">new</span> Singleton_01();</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>单例模式有一个特点就是不允许外部直接创建,也就是私有的构造函数</li>
<li>目前此方式的单例确实满足了懒加载,但是如果有多个访问者同事去获取对象实例,你那么就会早场多个同样的实例并存,从而没有达到单例的 要求</li>
</ul>
<p><strong>2.懒汉模式(线程安全)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">singleton_02</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> singleton_02 instance;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton_02</span><span class="params">()</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> synchrinized Singleton_02 <span class="title">getIntance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> != instance)&#123;</span><br><span class="line">            <span class="keyword">return</span> instance</span><br><span class="line">        &#125;</span><br><span class="line">        instance = <span class="keyword">new</span> Singleton_02();</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>此种模式虽然是安全的,但是由于把锁加到方法上后,所有的访问都因为需要锁占用导致资源的浪费,如果不是特殊情况下,不建议此种方式时间单例模式</li>
</ul>
<p><strong>3.饿汉模式(线程安全)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton_03</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton_03 = <span class="keyword">new</span> Singleton_03():</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton_03</span><span class="params">()</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton_03 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> instance;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>此种方式与我们开头的第一个实例化<code>Map</code>基本一致，在程序启动的时候直接运行加载，后续有外部需要使用的时候获取即可。</li>
<li>但此种方式并不是<code>懒加载</code>，也就是说无论你程序中是否用到这样的类都会在<strong>程序启动之初</strong>进行创建。</li>
<li>那么这种方式导致的问题就像你下载个游戏软件，可能你游戏地图还没有打开呢，但是程序已经将这些地图全部实例化。到你手机上最明显体验就一开游戏内存满了，手机卡了，需要换了。</li>
</ul>
<p><strong>4.使用类的内部类(线程安全)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Sinleton_04</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton_04</span><span class="params">()</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton_04 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> SingletonHolder.instance;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SingletonHolder</span></span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> Singleton_04 instance = <span class="keyword">new</span> Single_04();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>使用类的静态内部类实现的单例模式，既保证了线程安全有保证了懒加载，同时不会因为加锁的方式耗费性能。</p>
</li>
<li><p>这主要是因为JVM虚拟机可以保证多线程并发访问的正确性，也就是一个类的构造方法在多线程环境下可以被正确的加载。</p>
</li>
<li><p>此种方式也是非常推荐使用的一种单例模式</p>
</li>
</ul>
<p><strong>5.双重锁校验（线程安全）</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton_05</span></span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton_05 instance;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton_05</span><span class="params">()</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton_05 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">null</span> != instance)&#123;</span><br><span class="line">            <span class="keyword">return</span> instance;</span><br><span class="line">        &#125;</span><br><span class="line">        ysnchoinized(Singleton_05.class)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> == intance)&#123;</span><br><span class="line">                 instance = <span class="keyword">new</span> Singleton_05();</span><br><span class="line">            &#125;</span><br><span class="line">           <span class="keyword">return</span> instance;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>双重锁的方式是方法级锁的优化，减少了部分获取实例的耗时。</li>
<li>同时这种方式也满足了懒加载。</li>
</ul>
<p><strong>6.CAS「AtomicReference」(线程安全)</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Singleton_06</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Singleton_06</span><span class="params">()</span></span>&#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Singleton_06 instance;</span><br><span class="line">    <span class="keyword">private</span> staic <span class="keyword">final</span> AtomicReference&lt;Singleton_06&gt; INSTANCE = <span class="keyword">new</span> AtomicReference&lt;&gt;();</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Singleton_06 <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(;;)&#123;</span><br><span class="line">            instance = INSTANCE.get();</span><br><span class="line">            <span class="keyword">if</span>(<span class="keyword">null</span> != instance)&#123;</span><br><span class="line">                <span class="keyword">return</span> instance;</span><br><span class="line">            &#125;</span><br><span class="line">            INSTANCE.compatorAndSet(<span class="keyword">null</span>,<span class="keyword">new</span> Singleton_06());</span><br><span class="line">            <span class="keyword">return</span> INSTANCE.get();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>java并发库提供了很多原子类来支持并发访问的数据安全性；<code>AtomicInteger</code>、<code>AtomicBoolean</code>、<code>AtomicLong</code>、<code>AtomicReference</code>。</li>
<li>AtomicReference 可以封装引用一个V实例，支持并发访问如上的单例方式就是使用了这样的一个特点。</li>
<li>使用CAS的好处就是不需要使用传统的加锁方式保证线程安全，而是依赖于CAS的忙等算法，依赖于底层硬件的实现，来保证线程安全。相对于其他锁的实现没有线程的切换和阻塞也就没有了额外的开销，并且可以支持较大的并发性。</li>
<li>当然CAS也有一个缺点就是忙等，如果一直没有获取到将会处于死循环中。</li>
</ul>
<p><strong>7.枚举法</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">enum</span> <span class="title">Singleton_07</span></span>&#123;</span><br><span class="line">    INSTANCE;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">dosomthing</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;hello~~&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure>

<blockquote>
<p>约书亚·布洛克（英语：Joshua J. Bloch，1961年8月28日－），美国著名程序员。他为Java平台设计并实作了许多的功能，曾担任Google的首席Java架构师（Chief Java Architect）。</p>
</blockquote>
<p><strong>调用方式</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span></span>&#123;</span><br><span class="line">    Singleton_07.INSTANCE.dosomthing();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><em>这种写法在功能上与共有域方法相近，但是它更简洁，无偿地提供了串行化机制，绝对防止对此实例化，即使是在面对复杂的串行化或者反射攻击的时候。虽然这中方法还没有广泛采用，但是单元素的枚举类型已经成为实现Singleton的最佳方法。</em></p>
<p>但也要知道此种方式在存在继承场景下是不可用的。</p>
<p><strong>总结</strong></p>
<ul>
<li>单例模式,很常用,常见的一种设计模式,也是比较简单的设计模式,但是单例模式包含很多的方法,懒汉,饿汉线程是否安全,静态类,内部类,加锁,串行化枚举等等</li>
<li>在平时的开发中,如果确保此类是全局可用不需要做懒加载,那么直接创建给并给外部调用即可,但是在很多的时候,有些是需要触发一定的条件后才有效, 那么一定要用懒加载,线程的安全上可以按需选择</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/11/04/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="冯玮">
      <meta itemprop="description" content="以梦为马，明日天涯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冯玮的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/04/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">设计模式-原型模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-04 14:28:46 / 修改时间：14:29:11" itemprop="dateCreated datePublished" datetime="2020-11-04T14:28:46+08:00">2020-11-04</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="设计模式——-原型模式"><a href="#设计模式——-原型模式" class="headerlink" title="设计模式—— 原型模式"></a>设计模式—— 原型模式</h1><p><strong>原型模式介绍</strong></p>
<p>原型模式主要解决的问题就是创建重复对象，而这部分<code>对象</code>内容本身比较复杂，生成过程可能从库或者RPC接口中获取数据的耗时较长，因此采用克隆的方式节省时间。</p>
<p>其实这种场景经常出现在我们的身边，只不过很少用到自己的开发中，就像； </p>
<ol>
<li>你经常<code>Ctrl+C</code>、<code>Ctrl+V</code>，复制粘贴代码。</li>
<li>Java多数类中提供的API方法；<code>Object clone()</code>。</li>
<li>细胞的有丝分裂。</li>
</ol>
<p>类似以上的场景并不少，但如果让你去思考平时的代码开发中，有用到这样的设计模式吗？确实不那么容易找到，甚至有时候是忽略了这个设计模式的方式。在没有阅读下文之前，也可以思考下哪些场景可以用到。</p>
<p>每个人都经历过考试，从纸制版到上机答题，大大小小也有几百场。而以前坐在教室里答题身边的人都是一套试卷，考试的时候还能偷摸或者别人给发信息抄一抄答案。</p>
<p>但从一部分可以上机考试的内容开始，在保证大家的公平性一样的题目下，开始出现试题混排更有做的好的答案选项也混排。这样大大的增加了抄的成本，也更好的做到了考试的公平性。</p>
<p><strong>但如果这个公平性的考试需求交给你来完成，你会怎么做？</strong></p>
<p>因为需要实现一个上机考试抽题的服务，因此在这里建造一个题库题目的场景类信息，用于创建；<code>选择题</code>、<code>问答题</code>。</p>
<p>创建<code>选择题</code>,<code>问答题</code>两个实体类 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnswerQuestion</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> String key;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">AnswerQuestion</span><span class="params">(String name, String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setKey</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChoiceQuestion</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name; <span class="comment">//题目</span></span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; option; <span class="comment">//选项</span></span><br><span class="line">    <span class="keyword">private</span> String key; <span class="comment">//答案</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ChoiceQuestion</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ChoiceQuestion</span><span class="params">(String name, Map&lt;String, String&gt; option, String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.option = option;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, String&gt; <span class="title">getOption</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> option;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setOption</span><span class="params">(Map&lt;String, String&gt; option)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.option = option;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> key;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setKey</span><span class="params">(String key)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.key = key;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>这里简单的创建了两种提醒简答题和选择题,有需要的可以继续添加其他类型的题目</li>
</ul>
<p><strong>原型结构</strong></p>
<p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-4-03.png" alt="原型模式模型结构"></p>
<ul>
<li>工程中包括了核心的题库类<code>QuestionBank</code>，题库中主要负责将各个的题目进行组装最终输出试卷。</li>
<li>针对每一个试卷都会使用克隆的方式进行复制，复制完成后将试卷中题目以及每个题目的答案进行乱序处理。这里提供了工具包；<em>TopicRandomUtil</em></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Topic</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String newKey;</span><br><span class="line">    <span class="keyword">private</span> Map&lt;String, String&gt; newOption;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Topic</span><span class="params">(String newKey, Map&lt;String, String&gt; newOption)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.newKey = newKey;</span><br><span class="line">        <span class="keyword">this</span>.newOption = newOption;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getNewKey</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> newKey;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNewKey</span><span class="params">(String newKey)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.newKey = newKey;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Map&lt;String, String&gt; <span class="title">getNewOption</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> newOption;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setNewOption</span><span class="params">(Map&lt;String, String&gt; newOption)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.newOption = newOption;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span></span>&#123;</span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        stringBuilder.append(<span class="string">&quot;答案：&quot;</span>+<span class="keyword">this</span>.newKey+<span class="string">&quot;\t\n&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (String s : newOption.keySet()) &#123;</span><br><span class="line">            stringBuilder.append(s).append(<span class="string">&quot;. &quot;</span>).append(newOption.get(s)+<span class="string">&quot;\t\n\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stringBuilder.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 交换ABCD之间的答案</span></span><br><span class="line"><span class="comment"> * 打乱选项,并把正确答案找出来</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TopicRandomUtil</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Topic <span class="title">random</span><span class="params">(Map&lt;String,String&gt; option,String key)</span></span>&#123;</span><br><span class="line">        Set&lt;String&gt; keySet = option.keySet(); <span class="comment">//获取ABCD顺序</span></span><br><span class="line">        List&lt;String&gt; keyList = <span class="keyword">new</span> ArrayList&lt;&gt;(keySet);</span><br><span class="line">        Collections.shuffle(keyList); <span class="comment">//打乱ABCD</span></span><br><span class="line">        Map&lt;String, String&gt; newOption = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">0</span>;<span class="comment">//获取打乱的ABCD次序</span></span><br><span class="line">        String newKey = <span class="string">&quot;&quot;</span>;</span><br><span class="line">        <span class="keyword">for</span> (String next : keySet) &#123;</span><br><span class="line">            String randomKey = keyList.get(index++);</span><br><span class="line">            newOption.put(randomKey, option.get(next));<span class="comment">//根据打乱的次序依次获取选项内容</span></span><br><span class="line">            <span class="keyword">if</span>(next.equals(key))&#123;<span class="comment">//选中答案</span></span><br><span class="line">                newKey = randomKey;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Topic(newKey, newOption);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>可能你还记得上文里我们提供了Map存储题目选项，同时key的属性存放答案。<em>如果忘记可以往上翻翻</em></li>
<li>这个这个工具类的操作就是将原有Map中的选型乱序操作，<code>也就是A的选项内容给B</code>，<code>B的可能给C</code>，同时记录正确答案在处理后的位置信息</li>
</ul>
<p><strong>克隆对象处理类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuestionBank</span> <span class="keyword">implements</span> <span class="title">Cloneable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String stuName;<span class="comment">//学生姓名</span></span><br><span class="line">    <span class="keyword">private</span> String stuNum;<span class="comment">//考生号</span></span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;ChoiceQuestion&gt; choiceQuestions = <span class="keyword">new</span> ArrayList&lt;&gt;();<span class="comment">//选择题</span></span><br><span class="line">    <span class="keyword">private</span> ArrayList&lt;AnswerQuestion&gt; answerQuestions = <span class="keyword">new</span> ArrayList&lt;&gt;();<span class="comment">//简答题</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 选择题</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> choiceQuestion</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> QuestionBank <span class="title">append</span><span class="params">(ChoiceQuestion choiceQuestion)</span> </span>&#123;</span><br><span class="line">        choiceQuestions.add(choiceQuestion);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 简答题</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> answerQuestion</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> QuestionBank <span class="title">append</span><span class="params">(AnswerQuestion answerQuestion)</span> </span>&#123;</span><br><span class="line">        answerQuestions.add(answerQuestion);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 克隆</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> CloneNotSupportedException</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> Object <span class="title">clone</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        QuestionBank questionBank = (QuestionBank) <span class="keyword">super</span>.clone();</span><br><span class="line">        questionBank.choiceQuestions = (ArrayList&lt;ChoiceQuestion&gt;) choiceQuestions.clone();</span><br><span class="line">        questionBank.answerQuestions = (ArrayList&lt;AnswerQuestion&gt;) answerQuestions.clone();</span><br><span class="line">        Collections.shuffle(questionBank.choiceQuestions); <span class="comment">//打乱选择题顺序</span></span><br><span class="line">        Collections.shuffle(questionBank.answerQuestions);<span class="comment">//打乱简答题顺序</span></span><br><span class="line">        <span class="comment">//打乱克隆选项及答案顺序</span></span><br><span class="line">        <span class="keyword">for</span> (ChoiceQuestion choiceQuestion : questionBank.choiceQuestions) &#123;</span><br><span class="line">            Topic random = TopicRandomUtil.random(choiceQuestion.getOption(), choiceQuestion.getKey());</span><br><span class="line">            choiceQuestion.setKey(random.getNewKey());</span><br><span class="line">            choiceQuestion.setOption(random.getNewOption());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> questionBank;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getStuName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> stuName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStuName</span><span class="params">(String stuName)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.stuName = stuName;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getStuNum</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> stuNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setStuNum</span><span class="params">(String stuNum)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.stuNum = stuNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 打印试卷</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        StringBuilder stringBuilder = <span class="keyword">new</span> StringBuilder();</span><br><span class="line">        stringBuilder.append(<span class="string">&quot;姓名:&quot;</span> + stuName + <span class="string">&quot;\t&quot;</span>).append(<span class="string">&quot;考生号:&quot;</span> + stuNum + <span class="string">&quot;\t\n&quot;</span>);</span><br><span class="line">        stringBuilder.append(<span class="string">&quot;-----------------------------------------------------------\t\n&quot;</span>);</span><br><span class="line">        stringBuilder.append(<span class="string">&quot;选择题\t\n&quot;</span>);</span><br><span class="line">        <span class="keyword">int</span> index = <span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span> (ChoiceQuestion choiceQuestion : choiceQuestions) &#123;</span><br><span class="line">            Map&lt;String, String&gt; option = choiceQuestion.getOption();</span><br><span class="line">            stringBuilder.append(<span class="string">&quot;第&quot;</span> + index++ + <span class="string">&quot;题:&quot;</span> + choiceQuestion.getName() + <span class="string">&quot;()\t\n&quot;</span>);</span><br><span class="line">            <span class="keyword">for</span> (String key : option.keySet()) &#123;</span><br><span class="line">                stringBuilder.append(key + <span class="string">&quot;. &quot;</span> + option.get(key) + <span class="string">&quot;\t\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            stringBuilder.append(<span class="string">&quot;答案:&quot;</span> + choiceQuestion.getKey() + <span class="string">&quot;\t\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        stringBuilder.append(<span class="string">&quot;简答题\t\n&quot;</span>);</span><br><span class="line">        <span class="keyword">for</span> (AnswerQuestion answerQuestion : answerQuestions) &#123;</span><br><span class="line">            stringBuilder.append(<span class="string">&quot;题目:&quot;</span> + answerQuestion.getName() + <span class="string">&quot;?\t\n&quot;</span>);</span><br><span class="line">            stringBuilder.append(<span class="string">&quot;答案:&quot;</span> + answerQuestion.getKey()+<span class="string">&quot;\t\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> stringBuilder.toString();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>这里的主要操作内容有三个，分别是；</p>
<ul>
<li>两个<code>append()</code>，对各项题目的添加，有点像我们在建造者模式中使用的方式，添加装修物料。</li>
<li><code>clone() </code>，这里的核心操作就是对对象的复制，这里的复制不只是包括了本身，同时对两个集合也做了复制。只有这样的拷贝才能确保在操作克隆对象的时候不影响原对象(深拷贝)。<em>深拷贝:对对象中的对象进行克隆</em></li>
<li>乱序操作，在<code>list</code>集合中有一个方法，<code>Collections.shuffle</code>，可以将原有集合的顺序打乱，输出一个新的顺序。在这里我们使用此方法对题目进行乱序操作。</li>
</ul>
<p><strong>初始化试卷数据</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">QuestionBankController</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> QuestionBank questionBank = <span class="keyword">new</span> QuestionBank();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">QuestionBankController</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Map&lt;String, String&gt; map01 = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">        map01.put(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;JAVA2 EE&quot;</span>);</span><br><span class="line">        map01.put(<span class="string">&quot;B&quot;</span>, <span class="string">&quot;JAVA2 Card&quot;</span>);</span><br><span class="line">        map01.put(<span class="string">&quot;C&quot;</span>, <span class="string">&quot;JAVA2 ME&quot;</span>);</span><br><span class="line">        map01.put(<span class="string">&quot;D&quot;</span>, <span class="string">&quot;JAVA2 HE&quot;</span>);</span><br><span class="line">        map01.put(<span class="string">&quot;E&quot;</span>, <span class="string">&quot;JAVA2 SE&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Map&lt;String, String&gt; map02 = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">        map02.put(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;JAVA程序的main方法必须写在类里面&quot;</span>);</span><br><span class="line">        map02.put(<span class="string">&quot;B&quot;</span>, <span class="string">&quot;JAVA程序中可以有多个main方法&quot;</span>);</span><br><span class="line">        map02.put(<span class="string">&quot;C&quot;</span>, <span class="string">&quot;JAVA程序中类名必须与文件名一样&quot;</span>);</span><br><span class="line">        map02.put(<span class="string">&quot;D&quot;</span>, <span class="string">&quot;JAVA程序的main方法中如果只有一条语句，可以不用&#123;&#125;(大括号)括起来&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Map&lt;String, String&gt; map03 = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">        map03.put(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;变量由字母、下划线、数字、$符号随意组成；&quot;</span>);</span><br><span class="line">        map03.put(<span class="string">&quot;B&quot;</span>, <span class="string">&quot;变量不能以数字作为开头；&quot;</span>);</span><br><span class="line">        map03.put(<span class="string">&quot;C&quot;</span>, <span class="string">&quot;A和a在java中是同一个变量；&quot;</span>);</span><br><span class="line">        map03.put(<span class="string">&quot;D&quot;</span>, <span class="string">&quot;不同类型的变量，可以起相同的名字；&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Map&lt;String, String&gt; map04 = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">        map04.put(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;STRING&quot;</span>);</span><br><span class="line">        map04.put(<span class="string">&quot;B&quot;</span>, <span class="string">&quot;x3x;&quot;</span>);</span><br><span class="line">        map04.put(<span class="string">&quot;C&quot;</span>, <span class="string">&quot;void&quot;</span>);</span><br><span class="line">        map04.put(<span class="string">&quot;D&quot;</span>, <span class="string">&quot;de$f&quot;</span>);</span><br><span class="line"></span><br><span class="line">        Map&lt;String, String&gt; map05 = <span class="keyword">new</span> HashMap&lt;String, String&gt;();</span><br><span class="line">        map05.put(<span class="string">&quot;A&quot;</span>, <span class="string">&quot;31&quot;</span>);</span><br><span class="line">        map05.put(<span class="string">&quot;B&quot;</span>, <span class="string">&quot;0&quot;</span>);</span><br><span class="line">        map05.put(<span class="string">&quot;C&quot;</span>, <span class="string">&quot;1&quot;</span>);</span><br><span class="line">        map05.put(<span class="string">&quot;D&quot;</span>, <span class="string">&quot;2&quot;</span>);</span><br><span class="line"></span><br><span class="line">        questionBank.append(<span class="keyword">new</span> ChoiceQuestion(<span class="string">&quot;JAVA所定义的版本中不包括&quot;</span>, map01, <span class="string">&quot;D&quot;</span>))</span><br><span class="line">                .append(<span class="keyword">new</span> ChoiceQuestion(<span class="string">&quot;下列说法正确的是&quot;</span>, map02, <span class="string">&quot;A&quot;</span>))</span><br><span class="line">                .append(<span class="keyword">new</span> ChoiceQuestion(<span class="string">&quot;变量命名规范说法正确的是&quot;</span>, map03, <span class="string">&quot;B&quot;</span>))</span><br><span class="line">                .append(<span class="keyword">new</span> ChoiceQuestion(<span class="string">&quot;以下()不是合法的标识符&quot;</span>,map04, <span class="string">&quot;C&quot;</span>))</span><br><span class="line">                .append(<span class="keyword">new</span> ChoiceQuestion(<span class="string">&quot;表达式(11+3*8)/4%3的值是&quot;</span>, map05, <span class="string">&quot;D&quot;</span>))</span><br><span class="line">                .append(<span class="keyword">new</span> AnswerQuestion(<span class="string">&quot;小红马和小黑马生的小马几条腿&quot;</span>, <span class="string">&quot;4条腿&quot;</span>))</span><br><span class="line">                .append(<span class="keyword">new</span> AnswerQuestion(<span class="string">&quot;铁棒打头疼还是木棒打头疼&quot;</span>, <span class="string">&quot;头最疼&quot;</span>))</span><br><span class="line">                .append(<span class="keyword">new</span> AnswerQuestion(<span class="string">&quot;什么床不能睡觉&quot;</span>, <span class="string">&quot;牙床&quot;</span>))</span><br><span class="line">                .append(<span class="keyword">new</span> AnswerQuestion(<span class="string">&quot;为什么好马不吃回头草&quot;</span>, <span class="string">&quot;后面的草没了&quot;</span>));</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">createPaper</span><span class="params">(String candidate, String number)</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">        QuestionBank questionBankClone = (QuestionBank) questionBank.clone();</span><br><span class="line">        questionBankClone.setStuName(candidate);</span><br><span class="line">        questionBankClone.setStuNum(number);</span><br><span class="line">        <span class="keyword">return</span> questionBankClone.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<ul>
<li>这个类的内容就比较简单了，主要提供对试卷内容的模式初始化操作(<em>所有考生试卷一样，题目顺序不一致</em>)。</li>
<li>以及对外部提供创建试卷的方法，在创建的过程中使用的是克隆的方式；<code>(QuestionBank) questionBank.clone();</code>，并最终返回试卷信息</li>
</ul>
<p><strong>编写测试类</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">get_question_bank</span><span class="params">()</span> <span class="keyword">throws</span> CloneNotSupportedException </span>&#123;</span><br><span class="line">       QuestionBankController questionBankController = <span class="keyword">new</span> QuestionBankController();</span><br><span class="line">       System.out.println(questionBankController.createPaper(<span class="string">&quot;张三&quot;</span>, <span class="string">&quot;12&quot;</span>));</span><br><span class="line">       System.out.println(questionBankController.createPaper(<span class="string">&quot;李四&quot;</span>, <span class="string">&quot;13&quot;</span>));</span><br><span class="line">       System.out.println(questionBankController.createPaper(<span class="string">&quot;王五&quot;</span>, <span class="string">&quot;14&quot;</span>));</span><br><span class="line">       System.out.println(questionBankController.createPaper(<span class="string">&quot;李六&quot;</span>, <span class="string">&quot;15&quot;</span>));</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<p>结果:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br></pre></td><td class="code"><pre><span class="line">姓名:张三	考生号:<span class="number">12</span>	</span><br><span class="line">-----------------------------------------------------------	</span><br><span class="line">选择题	</span><br><span class="line">第<span class="number">1</span>题:下列说法正确的是()	</span><br><span class="line">A. JAVA程序中类名必须与文件名一样	</span><br><span class="line">B. JAVA程序的main方法中如果只有一条语句，可以不用&#123;&#125;(大括号)括起来	</span><br><span class="line">C. JAVA程序的main方法必须写在类里面	</span><br><span class="line">D. JAVA程序中可以有多个main方法	</span><br><span class="line">答案:C	</span><br><span class="line">第<span class="number">2</span>题:变量命名规范说法正确的是()	</span><br><span class="line">A. 变量不能以数字作为开头；	</span><br><span class="line">B. 变量由字母、下划线、数字、$符号随意组成；	</span><br><span class="line">C. A和a在java中是同一个变量；	</span><br><span class="line">D. 不同类型的变量，可以起相同的名字；	</span><br><span class="line">答案:A	</span><br><span class="line">第<span class="number">3</span>题:JAVA所定义的版本中不包括()	</span><br><span class="line">A. JAVA2 EE	</span><br><span class="line">B. JAVA2 Card	</span><br><span class="line">C. JAVA2 ME	</span><br><span class="line">D. JAVA2 HE	</span><br><span class="line">E. JAVA2 SE	</span><br><span class="line">答案:D	</span><br><span class="line">第<span class="number">4</span>题:表达式(<span class="number">11</span>+<span class="number">3</span>*<span class="number">8</span>)/<span class="number">4</span>%<span class="number">3</span>的值是()	</span><br><span class="line">A. <span class="number">2</span>	</span><br><span class="line">B. <span class="number">31</span>	</span><br><span class="line">C. <span class="number">1</span>	</span><br><span class="line">D. <span class="number">0</span>	</span><br><span class="line">答案:A	</span><br><span class="line">第<span class="number">5</span>题:以下()不是合法的标识符()	</span><br><span class="line">A. <span class="keyword">void</span>	</span><br><span class="line">B. STRING	</span><br><span class="line">C. de$f	</span><br><span class="line">D. x3x;	</span><br><span class="line">答案:A	</span><br><span class="line">简答题	</span><br><span class="line">题目:小红马和小黑马生的小马几条腿?	</span><br><span class="line">答案:<span class="number">4</span>条腿	</span><br><span class="line">题目:什么床不能睡觉?	</span><br><span class="line">答案:牙床	</span><br><span class="line">题目:铁棒打头疼还是木棒打头疼?	</span><br><span class="line">答案:头最疼	</span><br><span class="line">题目:为什么好马不吃回头草?	</span><br><span class="line">答案:后面的草没了	</span><br><span class="line"></span><br><span class="line">姓名:李四	考生号:<span class="number">13</span>	</span><br><span class="line">-----------------------------------------------------------	</span><br><span class="line">选择题	</span><br><span class="line">第<span class="number">1</span>题:以下()不是合法的标识符()	</span><br><span class="line">A. de$f	</span><br><span class="line">B. STRING	</span><br><span class="line">C. <span class="keyword">void</span>	</span><br><span class="line">D. x3x;	</span><br><span class="line">答案:C	</span><br><span class="line">第<span class="number">2</span>题:变量命名规范说法正确的是()	</span><br><span class="line">A. A和a在java中是同一个变量；	</span><br><span class="line">B. 变量不能以数字作为开头；	</span><br><span class="line">C. 变量由字母、下划线、数字、$符号随意组成；	</span><br><span class="line">D. 不同类型的变量，可以起相同的名字；	</span><br><span class="line">答案:B	</span><br><span class="line">第<span class="number">3</span>题:表达式(<span class="number">11</span>+<span class="number">3</span>*<span class="number">8</span>)/<span class="number">4</span>%<span class="number">3</span>的值是()	</span><br><span class="line">A. <span class="number">1</span>	</span><br><span class="line">B. <span class="number">2</span>	</span><br><span class="line">C. <span class="number">0</span>	</span><br><span class="line">D. <span class="number">31</span>	</span><br><span class="line">答案:B	</span><br><span class="line">第<span class="number">4</span>题:JAVA所定义的版本中不包括()	</span><br><span class="line">A. JAVA2 Card	</span><br><span class="line">B. JAVA2 HE	</span><br><span class="line">C. JAVA2 SE	</span><br><span class="line">D. JAVA2 ME	</span><br><span class="line">E. JAVA2 EE	</span><br><span class="line">答案:B	</span><br><span class="line">第<span class="number">5</span>题:下列说法正确的是()	</span><br><span class="line">A. JAVA程序的main方法必须写在类里面	</span><br><span class="line">B. JAVA程序中可以有多个main方法	</span><br><span class="line">C. JAVA程序的main方法中如果只有一条语句，可以不用&#123;&#125;(大括号)括起来	</span><br><span class="line">D. JAVA程序中类名必须与文件名一样	</span><br><span class="line">答案:A	</span><br><span class="line">简答题	</span><br><span class="line">题目:小红马和小黑马生的小马几条腿?	</span><br><span class="line">答案:<span class="number">4</span>条腿	</span><br><span class="line">题目:铁棒打头疼还是木棒打头疼?	</span><br><span class="line">答案:头最疼	</span><br><span class="line">题目:什么床不能睡觉?	</span><br><span class="line">答案:牙床	</span><br><span class="line">题目:为什么好马不吃回头草?	</span><br><span class="line">答案:后面的草没了	</span><br><span class="line"></span><br><span class="line">姓名:王五	考生号:<span class="number">14</span>	</span><br><span class="line">-----------------------------------------------------------	</span><br><span class="line">选择题	</span><br><span class="line">第<span class="number">1</span>题:变量命名规范说法正确的是()	</span><br><span class="line">A. 不同类型的变量，可以起相同的名字；	</span><br><span class="line">B. 变量由字母、下划线、数字、$符号随意组成；	</span><br><span class="line">C. 变量不能以数字作为开头；	</span><br><span class="line">D. A和a在java中是同一个变量；	</span><br><span class="line">答案:C	</span><br><span class="line">第<span class="number">2</span>题:表达式(<span class="number">11</span>+<span class="number">3</span>*<span class="number">8</span>)/<span class="number">4</span>%<span class="number">3</span>的值是()	</span><br><span class="line">A. <span class="number">1</span>	</span><br><span class="line">B. <span class="number">2</span>	</span><br><span class="line">C. <span class="number">0</span>	</span><br><span class="line">D. <span class="number">31</span>	</span><br><span class="line">答案:B	</span><br><span class="line">第<span class="number">3</span>题:JAVA所定义的版本中不包括()	</span><br><span class="line">A. JAVA2 EE	</span><br><span class="line">B. JAVA2 HE	</span><br><span class="line">C. JAVA2 Card	</span><br><span class="line">D. JAVA2 SE	</span><br><span class="line">E. JAVA2 ME	</span><br><span class="line">答案:B	</span><br><span class="line">第<span class="number">4</span>题:以下()不是合法的标识符()	</span><br><span class="line">A. STRING	</span><br><span class="line">B. <span class="keyword">void</span>	</span><br><span class="line">C. x3x;	</span><br><span class="line">D. de$f	</span><br><span class="line">答案:B	</span><br><span class="line">第<span class="number">5</span>题:下列说法正确的是()	</span><br><span class="line">A. JAVA程序的main方法必须写在类里面	</span><br><span class="line">B. JAVA程序的main方法中如果只有一条语句，可以不用&#123;&#125;(大括号)括起来	</span><br><span class="line">C. JAVA程序中类名必须与文件名一样	</span><br><span class="line">D. JAVA程序中可以有多个main方法	</span><br><span class="line">答案:A	</span><br><span class="line">简答题	</span><br><span class="line">题目:小红马和小黑马生的小马几条腿?	</span><br><span class="line">答案:<span class="number">4</span>条腿	</span><br><span class="line">题目:什么床不能睡觉?	</span><br><span class="line">答案:牙床	</span><br><span class="line">题目:为什么好马不吃回头草?	</span><br><span class="line">答案:后面的草没了	</span><br><span class="line">题目:铁棒打头疼还是木棒打头疼?	</span><br><span class="line">答案:头最疼	</span><br><span class="line"></span><br><span class="line">姓名:李六	考生号:<span class="number">15</span>	</span><br><span class="line">-----------------------------------------------------------	</span><br><span class="line">选择题	</span><br><span class="line">第<span class="number">1</span>题:以下()不是合法的标识符()	</span><br><span class="line">A. <span class="keyword">void</span>	</span><br><span class="line">B. x3x;	</span><br><span class="line">C. STRING	</span><br><span class="line">D. de$f	</span><br><span class="line">答案:A	</span><br><span class="line">第<span class="number">2</span>题:下列说法正确的是()	</span><br><span class="line">A. JAVA程序的main方法必须写在类里面	</span><br><span class="line">B. JAVA程序中可以有多个main方法	</span><br><span class="line">C. JAVA程序中类名必须与文件名一样	</span><br><span class="line">D. JAVA程序的main方法中如果只有一条语句，可以不用&#123;&#125;(大括号)括起来	</span><br><span class="line">答案:A	</span><br><span class="line">第<span class="number">3</span>题:JAVA所定义的版本中不包括()	</span><br><span class="line">A. JAVA2 EE	</span><br><span class="line">B. JAVA2 HE	</span><br><span class="line">C. JAVA2 ME	</span><br><span class="line">D. JAVA2 SE	</span><br><span class="line">E. JAVA2 Card	</span><br><span class="line">答案:B	</span><br><span class="line">第<span class="number">4</span>题:变量命名规范说法正确的是()	</span><br><span class="line">A. 不同类型的变量，可以起相同的名字；	</span><br><span class="line">B. 变量由字母、下划线、数字、$符号随意组成；	</span><br><span class="line">C. A和a在java中是同一个变量；	</span><br><span class="line">D. 变量不能以数字作为开头；	</span><br><span class="line">答案:D	</span><br><span class="line">第<span class="number">5</span>题:表达式(<span class="number">11</span>+<span class="number">3</span>*<span class="number">8</span>)/<span class="number">4</span>%<span class="number">3</span>的值是()	</span><br><span class="line">A. <span class="number">2</span>	</span><br><span class="line">B. <span class="number">0</span>	</span><br><span class="line">C. <span class="number">1</span>	</span><br><span class="line">D. <span class="number">31</span>	</span><br><span class="line">答案:A	</span><br><span class="line">简答题	</span><br><span class="line">题目:小红马和小黑马生的小马几条腿?	</span><br><span class="line">答案:<span class="number">4</span>条腿	</span><br><span class="line">题目:什么床不能睡觉?	</span><br><span class="line">答案:牙床	</span><br><span class="line">题目:铁棒打头疼还是木棒打头疼?	</span><br><span class="line">答案:头最疼	</span><br><span class="line">题目:为什么好马不吃回头草?	</span><br><span class="line">答案:后面的草没了	</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>总结</strong></p>
<ul>
<li>以上的实际场景模拟了原型模式在开发中重构的作用,但是原型模式的使用频率确实不是很高,如果有一些特殊场景需要使用到,也可以按照此设计模式进行优化,</li>
<li>另外原型设计模式的优点包括；便于通过克隆方式创建复杂对象、也可以避免重复做初始化操作、不需要与类中所属的其他类耦合等。但也有一些缺点如果对象中包括了循环引用的克隆，以及类中深度使用对象的克隆，都会使此模式变得异常麻烦。</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/11/03/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="冯玮">
      <meta itemprop="description" content="以梦为马，明日天涯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冯玮的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/03/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%BB%BA%E9%80%A0%E8%80%85%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">设计模式-建造者模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-03 16:33:39 / 修改时间：17:28:44" itemprop="dateCreated datePublished" datetime="2020-11-03T16:33:39+08:00">2020-11-03</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p><strong>建造者模式</strong></p>
<p>建造者模式所完成的额内容及时通过将多个简单对象通过一步步额组装构建出一个复杂对象的过程,</p>
<p>例如你玩王者荣耀时的初始化界面:有三条路,有树木,野怪,守卫塔等等,甚至 依赖于你的网络情况会控制清晰度.而当你换一个场景进行其他不同模式的选择时.同样会建设道路,树木,野怪等等,但是他们的摆放,和大小有不同,这里就可以用到建设者模式来初始化游戏元素.</p>
<p>而这样的根据相同的<code>物料</code>,不同的组装所产生的具体的内容,就是建造者模式的最终意图,也就是:讲一个复杂的构建与表示相分离.</p>
<p><strong>案例场景模拟</strong></p>
<p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-3-02.png" alt="image-20201103144120549"></p>
<ol>
<li><p>场景模拟工程</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">src</span><br><span class="line">    └─main</span><br><span class="line">        └─java</span><br><span class="line">            └─org</span><br><span class="line">                └─itstack</span><br><span class="line">                    └─demo</span><br><span class="line">                        └─design</span><br><span class="line">                            │  Matter.java</span><br><span class="line">                            │  package<span class="literal">-info</span>.java</span><br><span class="line">                            │</span><br><span class="line">                            ├─ceiling</span><br><span class="line">                            │      LevelOneCeiling.java</span><br><span class="line">                            │      LevelTwoCeiling.java</span><br><span class="line">                            │</span><br><span class="line">                            ├─coat</span><br><span class="line">                            │      DuluxCoat.java</span><br><span class="line">                            │      LiBangCoat.java</span><br><span class="line">                            │</span><br><span class="line">                            ├─floor</span><br><span class="line">                            │      DerFloor.java</span><br><span class="line">                            │      ShengXiangFloor.java</span><br><span class="line">                            │</span><br><span class="line">                            └─tile</span><br><span class="line">                                    DongPengTile.java</span><br><span class="line">                                    MarcoPoloTile.java</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>在模拟工程中提供了装修中所需要的物料:<code>ceilling(吊顶)</code>,<code>coat(涂料)</code>,<code>floor(地板)</code>,<code>tile(地砖)</code></p>
</li>
<li><p>场景简述</p>
<ol>
<li><p>物料接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 装修物料</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Matter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 场景；地板、地砖、涂料、吊顶</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">String <span class="title">scene</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 品牌</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">String <span class="title">brand</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 型号</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">String <span class="title">model</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 平米报价</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">BigDecimal <span class="title">price</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 描述</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="function">String <span class="title">desc</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
</li>
</ol>
<pre><code>  2.吊顶

  一级顶

  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 吊顶</span></span><br><span class="line"><span class="comment"> * 品牌；装修公司自带</span></span><br><span class="line"><span class="comment"> * 型号：一级顶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LevelOneCeiling</span> <span class="keyword">implements</span> <span class="title">Matter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">scene</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;吊顶&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">brand</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;装修公司自带&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">model</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;一级顶&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BigDecimal <span class="title">price</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BigDecimal(<span class="number">260</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;造型只做低一级，只有一个层次的吊顶，一般离顶120-150mm&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

  二级顶

  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 吊顶</span></span><br><span class="line"><span class="comment"> * 品牌；装修公司自带</span></span><br><span class="line"><span class="comment"> * 型号：二级顶</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LevelTwoCeiling</span>  <span class="keyword">implements</span> <span class="title">Matter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">scene</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;吊顶&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">brand</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;装修公司自带&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">model</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;二级顶&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BigDecimal <span class="title">price</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BigDecimal(<span class="number">850</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;两个层次的吊顶，二级吊顶高度一般就往下吊20cm，要是层高很高，也可增加每级的厚度&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></code></pre>
<ol start="2">
<li><p>涂料</p>
<p>多乐士</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DuluxCoat</span>  <span class="keyword">implements</span> <span class="title">Matter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">scene</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;涂料&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">brand</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;多乐士(Dulux)&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">model</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;第二代&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BigDecimal <span class="title">price</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BigDecimal(<span class="number">719</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;多乐士是阿克苏诺贝尔旗下的著名建筑装饰油漆品牌，产品畅销于全球100个国家，每年全球有5000万户家庭使用多乐士油漆。&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>立邦</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LiBangCoat</span> <span class="keyword">implements</span> <span class="title">Matter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">scene</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;涂料&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">brand</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;立邦&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">model</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;默认级别&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BigDecimal <span class="title">price</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BigDecimal(<span class="number">650</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;立邦始终以开发绿色产品、注重高科技、高品质为目标，以技术力量不断推进科研和开发，满足消费者需求。&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



</li>
</ol>
<pre><code>  3.地板

  德尔

  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DerFloor</span> <span class="keyword">implements</span> <span class="title">Matter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">scene</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;地板&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">brand</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;德尔(Der)&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">model</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;A+&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BigDecimal <span class="title">price</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BigDecimal(<span class="number">119</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;DER德尔集团是全球领先的专业木地板制造商，北京2008年奥运会家装和公装地板供应商&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

  圣象

  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ShengXiangFloor</span> <span class="keyword">implements</span> <span class="title">Matter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">scene</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;地板&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">brand</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;圣象&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">model</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;一级&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BigDecimal <span class="title">price</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BigDecimal(<span class="number">318</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;圣象地板是中国地板行业著名品牌。圣象地板拥有中国驰名商标、中国名牌、国家免检、中国环境标志认证等多项荣誉。&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

  4.地砖

  东鹏

  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DongPengTile</span> <span class="keyword">implements</span> <span class="title">Matter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">scene</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;地砖&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">brand</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;东鹏瓷砖&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">model</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;10001&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BigDecimal <span class="title">price</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BigDecimal(<span class="number">102</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;东鹏瓷砖以品质铸就品牌，科技推动品牌，口碑传播品牌为宗旨，2014年品牌价值132.35亿元，位列建陶行业榜首。&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

  马可波罗

  <figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MarcoPoloTile</span> <span class="keyword">implements</span> <span class="title">Matter</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">scene</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;地砖&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">brand</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;马可波罗(MARCO POLO)&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">model</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;缺省&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> BigDecimal <span class="title">price</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> BigDecimal(<span class="number">140</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">desc</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;“马可波罗”品牌诞生于1996年，作为国内最早品牌化的建陶品牌，以“文化陶瓷”占领市场，享有“仿古砖至尊”的美誉。&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

  + 以上就是本次装修公司所提供的`装修配置单`，**接下我们会通过案例去使用不同的物料组合出不同的套餐服务**</code></pre>
<p>   <strong>建造者模式重构代码</strong></p>
<p>建造者模式主要解决的问题是在软件系统中,有时候面临着一个复杂的对象的创建工作,其通常由各个部分的子对象用 一定的过程构成,由于需求的变化,这个复杂对象各个部分经常面临着重大变化,但是他们组在一起的过程相对稳定</p>
<p>这里我们会把构建的过程交给<code>创建者</code>类,而创建者通过我们的<code>构建工具包</code>,去构建出不同的<code>装修套餐</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">itstack-demo-design-3-02</span><br><span class="line">└── src</span><br><span class="line">    ├── main</span><br><span class="line">    │   └── java</span><br><span class="line">    │       └── org.itstack.demo.design</span><br><span class="line">    │           ├── Builder.java    </span><br><span class="line">    │           ├── DecorationPackageMenu.java</span><br><span class="line">    │           └── IMenu.java </span><br><span class="line">    └── test</span><br><span class="line">         └── java</span><br><span class="line">             └── org.itstack.demo.design.test</span><br><span class="line">                 └── ApiTest.java</span><br></pre></td></tr></table></figure>

<p><strong>构建者模型结构</strong></p>
<p><img src="https://bugstack.cn/assets/images/2020/itstack-demo-design-3-03.png" alt="image-20201103152418622"></p>
<p>工程中有三个核心类和一个测试类，核心类是建造者模式的具体实现。与<code>ifelse</code>实现方式相比，多出来了两个额外的类。具体功能如下；</p>
<ul>
<li><code>Builder</code>，建造者类具体的各种组装由此类实现。</li>
<li><code>DecorationPackageMenu</code>，是<code>IMenu</code>接口的实现类，主要是承载建造过程中的填充器。相当于这是一套承载物料和创建者中间衔接的内容。</li>
</ul>
<p><strong>好</strong>，那么接下来会分别讲解几个类的具体实现。</p>
<p><strong>代码实现</strong></p>
<ol>
<li><p>定义装修包接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">IMenu</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function">IMenu <span class="title">appendCeiling</span><span class="params">(Matter matter)</span></span>; <span class="comment">// 吊顶</span></span><br><span class="line"></span><br><span class="line">    <span class="function">IMenu <span class="title">appendCoat</span><span class="params">(Matter matter)</span></span>;    <span class="comment">// 涂料</span></span><br><span class="line"></span><br><span class="line">    <span class="function">IMenu <span class="title">appendFloor</span><span class="params">(Matter matter)</span></span>;   <span class="comment">// 地板</span></span><br><span class="line"></span><br><span class="line">    <span class="function">IMenu <span class="title">appendTile</span><span class="params">(Matter matter)</span></span>;    <span class="comment">// 地砖</span></span><br><span class="line"></span><br><span class="line">    <span class="function">String <span class="title">getDetail</span><span class="params">()</span></span>;                 <span class="comment">// 明细 </span></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>接口类中定义了填充各项物料的方法;<code>吊顶</code>,<code>涂料</code>,<code>地板</code>.<code>地砖</code>.以及最终提供获取全部明细的方法.</li>
</ul>
</li>
<li><p>装修包实现</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DecorationPackageMenu</span> <span class="keyword">implements</span> <span class="title">IMenu</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Matter&gt; list = <span class="keyword">new</span> ArrayList&lt;Matter&gt;();</span><br><span class="line">    <span class="keyword">private</span> BigDecimal price = BigDecimal.ZERO;</span><br><span class="line">    <span class="keyword">private</span> BigDecimal area;</span><br><span class="line">    <span class="keyword">private</span> String grade;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">DecorationPackageMenu</span><span class="params">(Double area, String grade)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.area = <span class="keyword">new</span> BigDecimal(area);</span><br><span class="line">        <span class="keyword">this</span>.grade = grade;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IMenu <span class="title">appendCilling</span><span class="params">(Matter matter)</span> </span>&#123;</span><br><span class="line">        list.add(matter);</span><br><span class="line">        price = price.add(area.multiply(<span class="keyword">new</span> BigDecimal(<span class="string">&quot;0.2&quot;</span>)).multiply(matter.price()));</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IMenu <span class="title">appendCocat</span><span class="params">(Matter matter)</span> </span>&#123;</span><br><span class="line">        list.add(matter);</span><br><span class="line">        price = price.add(area.multiply(<span class="keyword">new</span> BigDecimal(<span class="string">&quot;1.4&quot;</span>)).multiply(matter.price()));</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IMenu <span class="title">appendFloor</span><span class="params">(Matter matter)</span> </span>&#123;</span><br><span class="line">        list.add(matter);</span><br><span class="line">        price = price.add(area.multiply(matter.price()));</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IMenu <span class="title">appendTile</span><span class="params">(Matter matter)</span> </span>&#123;</span><br><span class="line">        list.add(matter);</span><br><span class="line">        price = price.add(area.multiply(matter.price()));</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getDetail</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        StringBuilder detail = <span class="keyword">new</span> StringBuilder(<span class="string">&quot;\r\n-------------------------------------------------------\r\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;装修清单&quot;</span> + <span class="string">&quot;\r\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;套餐等级：&quot;</span> + grade + <span class="string">&quot;\r\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;套餐价格：&quot;</span> + price.setScale(<span class="number">2</span>, BigDecimal.ROUND_HALF_UP) + <span class="string">&quot; 元\r\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;房屋面积：&quot;</span> + area.doubleValue() + <span class="string">&quot; 平米\r\n&quot;</span> +</span><br><span class="line">                <span class="string">&quot;材料清单：\r\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (Matter matter : list) &#123;</span><br><span class="line">            detail.append(matter.scene()).append(<span class="string">&quot;：&quot;</span>).append(matter.brand()).append(<span class="string">&quot;、&quot;</span>).append(matter.model()).append(<span class="string">&quot;、平米价格：&quot;</span>).append(matter.price()).append(<span class="string">&quot; 元。\n&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> detail.toString();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>装修包的实现中每一个方法都会了 <code>this</code>，也就可以非常方便的用于连续填充各项物料。</li>
<li>同时在填充时也会根据物料计算平米数下的报价，吊顶和涂料按照平米数适量乘以常熟计算。</li>
<li>最后同样提供了统一的获取装修清单的明细方法。</li>
</ul>
</li>
<li><p>建造者方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Builder</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IMenu <span class="title">levelOne</span><span class="params">(Double area)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DecorationPackageMenu(area, <span class="string">&quot;豪华欧式&quot;</span>)</span><br><span class="line">                .appendCeiling(<span class="keyword">new</span> LevelTwoCeiling())    <span class="comment">// 吊顶，二级顶</span></span><br><span class="line">                .appendCoat(<span class="keyword">new</span> DuluxCoat())             <span class="comment">// 涂料，多乐士</span></span><br><span class="line">                .appendFloor(<span class="keyword">new</span> ShengXiangFloor());     <span class="comment">// 地板，圣象</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IMenu <span class="title">levelTwo</span><span class="params">(Double area)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DecorationPackageMenu(area, <span class="string">&quot;轻奢田园&quot;</span>)</span><br><span class="line">                .appendCeiling(<span class="keyword">new</span> LevelTwoCeiling())   <span class="comment">// 吊顶，二级顶</span></span><br><span class="line">                .appendCoat(<span class="keyword">new</span> LiBangCoat())           <span class="comment">// 涂料，立邦</span></span><br><span class="line">                .appendTile(<span class="keyword">new</span> MarcoPoloTile());       <span class="comment">// 地砖，马可波罗</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> IMenu <span class="title">levelThree</span><span class="params">(Double area)</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> DecorationPackageMenu(area, <span class="string">&quot;现代简约&quot;</span>)</span><br><span class="line">                .appendCeiling(<span class="keyword">new</span> LevelOneCeiling())   <span class="comment">// 吊顶，二级顶</span></span><br><span class="line">                .appendCoat(<span class="keyword">new</span> LiBangCoat())           <span class="comment">// 涂料，立邦</span></span><br><span class="line">                .appendTile(<span class="keyword">new</span> DongPengTile());        <span class="comment">// 地砖，东鹏</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>建造者的使用中就已经非常容易了，统一的建造方式，通过不同物料填充出不同的装修风格；<code>豪华欧式</code>、<code>轻奢田园</code>、<code>现代简约</code>，如果将来业务扩展也可以将这部分内容配置到数据库自动生成。但整体的思想还可以使用创建者模式进行搭建。</li>
</ul>
</li>
</ol>
<p><strong>总结</strong></p>
<ul>
<li>通过上面对建造者模式的使用，已经可以摸索出一点心得。那就是什么时候会选择这样的设计模式，当：<code>一些基本物料不会变，而其组合经常变化的时候</code>，就可以选择这样的设计模式来构建代码。</li>
<li>此设计模式满足了单一职责原则以及可复用的技术、建造者独立、易扩展、便于控制细节风险。但同时当出现特别多的物料以及很多的组合后，类的不断扩展也会造成难以维护的问题。但这种设计结构模型可以把重复的内容抽象到数据库中，按照需要配置。这样就可以减少代码中大量的重复。</li>
<li>设计模式能带给你的是一些思想，但在平时的开发中怎么样清晰的提炼出符合此思路的建造模块，是比较难的。需要经过一些锻炼和不断承接更多的项目，从而获得这部分经验。有的时候你的代码写的好，往往是倒逼的，复杂的业务频繁的变化，不断的挑战！</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/11/02/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%9C%BA%E5%88%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="冯玮">
      <meta itemprop="description" content="以梦为马，明日天涯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冯玮的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/11/02/java%E5%8A%A8%E6%80%81%E4%BB%A3%E7%90%86%E6%9C%BA%E5%88%B6/" class="post-title-link" itemprop="url">java动态代理机制</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-11-02 10:04:20 / 修改时间：10:05:36" itemprop="dateCreated datePublished" datetime="2020-11-02T10:04:20+08:00">2020-11-02</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="java动态代理机制"><a href="#java动态代理机制" class="headerlink" title="java动态代理机制"></a>java动态代理机制</h1><blockquote>
<p>在学习Spring的时候，我们知道Spring主要有两大思想，一个是IoC，另一个就是AOP，对于IoC，依赖注入就不用多说了，而对于Spring的核心AOP来说，我们不但要知道怎么通过AOP来满足我们的功能，我们更需要学习的是其底层是怎么样的一个原理，而AOP的原理就是Java的动态代理机制，所以本篇随笔就是对Java的动态机制进行一个回顾。</p>
</blockquote>
<h3 id="首先问一个问题，为什么需要动态代理？"><a href="#首先问一个问题，为什么需要动态代理？" class="headerlink" title="首先问一个问题，为什么需要动态代理？"></a>首先问一个问题，为什么需要动态代理？</h3><ul>
<li>代码混乱：越来越多的非业务需求(日志和验证等)加入后，原有的业务方法急剧膨胀。每个方法在处理核心逻辑的同时还必须兼顾其他多个关注点。比如：每新添加了方法，还得继续写日志和验证。</li>
<li>代码分散：以日志需求为例，只是为了满足这个单一需求，就不得不在多个模块（方法）里多次重复相同的日志代码。如果日志需求发生变化，必须修改所有模块。比如：现在此类的方法里都显示方法名，那么每个方法都得一个一个改。</li>
</ul>
<h3 id="机制讲解"><a href="#机制讲解" class="headerlink" title="机制讲解"></a>机制讲解</h3><p>在Java的动态代理机制中，有两个重要的类或接口，一个是 InvocationHandler(Interface)、另一个则是 Proxy(Class)，这一个类和接口是实现我们动态代理所必须用到的。首先我们先来看看Java的API帮助文档是怎么样对这两个类进行描述的：</p>
<p>InvocationHandler：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">InvocationHandler is the <span class="class"><span class="keyword">interface</span> <span class="title">implemented</span> <span class="title">by</span> <span class="title">the</span> <span class="title">invocation</span> <span class="title">handler</span> <span class="title">of</span> <span class="title">a</span> <span class="title">proxy</span> <span class="title">instance</span>. </span></span><br><span class="line"><span class="class"><span class="title">Each</span> <span class="title">proxy</span> <span class="title">instance</span> <span class="title">has</span> <span class="title">an</span> <span class="title">associated</span> <span class="title">invocation</span> <span class="title">handler</span>. <span class="title">When</span> <span class="title">a</span> <span class="title">method</span> <span class="title">is</span> <span class="title">invoked</span> <span class="title">on</span> <span class="title">a</span> <span class="title">proxy</span> <span class="title">instance</span>, <span class="title">the</span> <span class="title">method</span> <span class="title">invocation</span> <span class="title">is</span> <span class="title">encoded</span> <span class="title">and</span> <span class="title">dispatched</span> <span class="title">to</span> <span class="title">the</span> <span class="title">invoke</span> <span class="title">method</span> <span class="title">of</span> <span class="title">its</span> <span class="title">invocation</span> <span class="title">handler</span>.</span></span><br></pre></td></tr></table></figure>

<p>每一个动态代理类都必须要实现InvocationHandler这个接口，并且每个代理类的实例都关联到了一个handler，当我们通过代理对象调用一个方法的时候，这个方法的调用就会被转发为由InvocationHandler这个接口的 invoke 方法来进行调用。我们来看看InvocationHandler这个接口的唯一一个方法 invoke 方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable</span></span><br></pre></td></tr></table></figure>

<p>我们看到这个方法一共接受三个参数，那么这三个参数分别代表什么呢？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable</span></span><br><span class="line"><span class="function">proxy:　 - 指代我们所代理的那个真实对象</span></span><br><span class="line"><span class="function">method:　- 指代的是我们所要调用真实对象的某个方法的Method对象</span></span><br><span class="line"><span class="function">args:　　- 指代的是调用真实对象某个方法时接受的参数</span></span><br></pre></td></tr></table></figure>

<p>如果不是很明白，等下通过一个实例会对这几个参数进行更深的讲解。</p>
<p>接下来我们来看看 Proxy 这个类：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Proxy provides static methods for creating dynamic proxy classes and instances, and it is also the superclass of all dynamic proxy classes created by those methods. </span><br></pre></td></tr></table></figure>

<p>Proxy这个类的作用就是用来动态创建一个代理对象的类，它提供了许多的方法，但是我们用的最多的就是 newProxyInstance 这个方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">newProxyInstance</span><span class="params">(ClassLoader loader, Class&lt;?&gt;[] interfaces,  InvocationHandler h)</span>  <span class="keyword">throws</span> IllegalArgumentException</span></span><br><span class="line"><span class="function">Returns an instance of a proxy class <span class="keyword">for</span> the specified interfaces that dispatches method invocations to the specified invocation handler.</span></span><br></pre></td></tr></table></figure>

<p>这个方法的作用就是得到一个动态的代理对象，其接收三个参数，我们来看看这三个参数所代表的含义：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Object <span class="title">newProxyInstance</span><span class="params">(ClassLoader loader, Class&lt;?&gt;[] interfaces, InvocationHandler h)</span> <span class="keyword">throws</span> IllegalArgumentException</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">loader: 一个ClassLoader对象，定义了由哪个ClassLoader对象来对生成的代理对象进行加载</span></span><br><span class="line"><span class="function">interfaces:　　一个Interface对象的数组，表示的是我将要给我需要代理的对象提供一组什么接口，如果我提供了一组接口给它，那么这个代理对象就宣称实现了该接口<span class="params">(多态)</span>，这样我就能调用这组接口中的方法了</span></span><br><span class="line"><span class="function">h:一个InvocationHandler对象，表示的是当我这个动态代理对象在调用方法的时候，会关联到哪一个InvocationHandler对象上</span></span><br></pre></td></tr></table></figure>

<p>好了，在介绍完这两个接口(类)以后，我们来通过一个实例来看看我们的动态代理模式是什么样的：</p>
<p>首先我们定义了一个Subject类型的接口，为其声明了两个方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span></span>;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">say</span><span class="params">(String msg)</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>接着，定义了一个类来实现这个接口，这个类就是我们的真实对象，RealSubject类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RealSubject</span> <span class="keyword">implements</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">rent</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;I want rent my house&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">say</span><span class="params">(String msg)</span> </span>&#123;</span><br><span class="line">        System.out.println(msg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>下一步，我们就要定义一个动态代理类了，前面说个，每一个动态代理类都必须要实现 InvocationHandler 这个接口，因此我们这个动态代理类也不例外：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Dynamic</span> <span class="keyword">implements</span> <span class="title">InvocationHandler</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Object subject;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Dynamic</span><span class="params">(Object subject)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.subject = subject;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;before rent house&quot;</span>);</span><br><span class="line">        System.out.println(<span class="string">&quot;method=&quot;</span>+method);</span><br><span class="line">        method.invoke(subject,args);</span><br><span class="line">        System.out.println(<span class="string">&quot;after rent house&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后，来看看我们的Client类：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">// 我们要代理的真实对象</span></span><br><span class="line">        Subject realSubject = <span class="keyword">new</span> RealSubject();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 我们要代理哪个真实对象，就将该对象传进去，最后是通过该真实对象来调用其方法的</span></span><br><span class="line">        InvocationHandler handler = <span class="keyword">new</span> Dynamic(realSubject);</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 通过Proxy的newProxyInstance方法来创建我们的代理对象，我们来看看其三个参数</span></span><br><span class="line"><span class="comment">         * 第一个参数handler.getClass().getClassLoader()，我们这里使用handler这个类的ClassLoader对象来加载我们的代理对象</span></span><br><span class="line"><span class="comment">         * 第二个参数realSubject.getClass().getInterfaces()，我们这里为代理对象提供的接口是真实对象所实行的接口，表示我要代理的是该真实对象，这样我            就能调用这组接口中的方法了</span></span><br><span class="line"><span class="comment">         * 第三个参数handler，我们这里将这个代理对象关联到了上方的 InvocationHandler 这个对象上</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Subject subject = (Subject) Proxy.newProxyInstance(handler.getClass().getClassLoader(), realSubject</span><br><span class="line">                .getClass().getInterfaces(), handler);</span><br><span class="line"></span><br><span class="line">        System.out.println(subject.getClass().getName());</span><br><span class="line">        subject.rent();</span><br><span class="line">        subject.say(<span class="string">&quot;world&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我们先来看看控制台的输出：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">com.sun.proxy.$Proxy0</span><br><span class="line">before rent house</span><br><span class="line">method&#x3D;public abstract void org.itstack.demo.proxy.Subject.rent()</span><br><span class="line">I want rent my house</span><br><span class="line">after rent house</span><br><span class="line">before rent house</span><br><span class="line">method&#x3D;public abstract void org.itstack.demo.proxy.Subject.say(java.lang.String)</span><br><span class="line">world</span><br><span class="line">after rent house</span><br></pre></td></tr></table></figure>

<p>我们首先来看看 $Proxy0 这东西，我们看到，这个东西是由 System.out.println(subject.getClass().getName()); 这条语句打印出来的，那么为什么我们返回的这个代理对象的类名是这样的呢？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Subject subject = (Subject)Proxy.newProxyInstance(handler.getClass().getClassLoader(), realSubject.getClass().getInterfaces(), handler);</span><br></pre></td></tr></table></figure>

<p>可能我以为返回的这个代理对象会是Subject类型的对象，或者是InvocationHandler的对象，结果却不是，首先我们解释一下<strong>为什么我们这里可以将其转化为Subject类型的对象？</strong>原因就是在newProxyInstance这个方法的第二个参数上，我们给这个代理对象提供了一组什么接口，那么我这个代理对象就会实现了这组接口，这个时候我们当然可以将这个代理对象强制类型转化为这组接口中的任意一个，因为这里的接口是Subject类型，所以就可以将其转化为Subject类型了。</p>
<p><strong>同时我们一定要记住，通过 Proxy.newProxyInstance 创建的代理对象是在jvm运行时动态生成的一个对象，它并不是我们的InvocationHandler类型，也不是我们定义的那组接口的类型，而是在运行是动态生成的一个对象，并且命名方式都是这样的形式，以$开头，proxy为中，最后一个数字表示对象的标号</strong>。</p>
<p>接着我们来看看这两句 </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">subject.rent();</span><br><span class="line"></span><br><span class="line">subject.hello(<span class="string">&quot;world&quot;</span>);</span><br></pre></td></tr></table></figure>

<p>这里是通过代理对象来调用实现的那种接口中的方法，这个时候程序就会跳转到由这个代理对象关联到的 handler 中的 invoke 方法去执行，而我们的这个 handler 对象又接受了一个 RealSubject 类型的参数，表示我要代理的就是这个真实对象，所以此时就会调用 handler 中的 invoke 方法去执行：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">       System.out.println(<span class="string">&quot;before rent house&quot;</span>);</span><br><span class="line">       System.out.println(<span class="string">&quot;method=&quot;</span>+method);</span><br><span class="line">       method.invoke(subject,args);</span><br><span class="line">       System.out.println(<span class="string">&quot;after rent house&quot;</span>);</span><br><span class="line">       <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>

<p>我们看到，在真正通过代理对象来调用真实对象的方法的时候，我们可以在该方法前后添加自己的一些操作，同时我们看到我们的这个 method 对象是这样的：</p>
<figure class="highlight console"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">method=public abstract void org.itstack.demo.proxy.Subject.rent()</span><br><span class="line">method=public abstract void org.itstack.demo.proxy.Subject.say(java.lang.String)</span><br></pre></td></tr></table></figure>

<p>正好就是我们的Subject接口中的两个方法，这也就证明了当我通过代理对象来调用方法的时候，起实际就是委托由其关联到的 handler 对象的invoke方法中来调用，并不是自己来真实调用，而是通过代理的方式来调用的。</p>
<p>这就是我们的java动态代理机制。</p>
<blockquote>
<p>本篇随笔详细的讲解了java中的动态代理机制，这个知识点非常非常的重要，包括我们Spring的AOP其就是通过动态代理的机制实现的，所以我们必须要好好的理解动态代理的机制。</p>
</blockquote>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/10/30/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="冯玮">
      <meta itemprop="description" content="以梦为马，明日天涯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冯玮的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/30/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E5%B7%A5%E5%8E%82%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">设计模式-工厂设计模式</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-10-30 10:08:56 / 修改时间：10:13:27" itemprop="dateCreated datePublished" datetime="2020-10-30T10:08:56+08:00">2020-10-30</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h1 id="工厂方法模式"><a href="#工厂方法模式" class="headerlink" title="工厂方法模式"></a>工厂方法模式</h1><p><img src="https://imgconvert.csdnimg.cn/aHR0cHM6Ly9idWdzdGFjay5jbi9hc3NldHMvaW1hZ2VzLzIwMjAvaXRzdGFjay1kZW1vLWRlc2lnbi0xLTAxLnBuZw?x-oss-process=image/format,png"></p>
<ul>
<li>工厂模式</li>
</ul>
<p>工厂模式又称为工厂方法模式,是一种创建型设计模式,其在父类中提供一个创建对象的方法,允许子类决定实例化对象的类型.</p>
<p>这种设计模式也是java开发中最常见的一种模式,他的主要意图是定义个亿创建对象的接口,让其子类自己决定实例化哪一个工厂类,工厂模式使其创建过程延迟到子类进行.</p>
<p>简单说就是为了提供代码结果的扩展性,屏蔽每一个功能类中的具体实现逻辑,让外部可以更加简单的只是知道调用即可,同事这也是去掉众多<code>ifelse</code>的方式,当然这可能也有缺点,比如需要实现的类非常的多,如何去维护,怎么样减低开发成本,但这些问题都可以在后续的设计模式中结合使用,逐步降低.</p>
<ul>
<li>模拟发奖多种商品</li>
</ul>
<table>
<thead>
<tr>
<th>序号</th>
<th>类型</th>
<th>接口</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>优惠券</td>
<td><code>CouponResult sendCoupon(String uId, String couponNumber, String uuid)</code></td>
</tr>
<tr>
<td>2</td>
<td>实物商品</td>
<td><code>Boolean deliverGoods(DeliverReq req)</code></td>
</tr>
<tr>
<td>3</td>
<td>第三方爱奇艺兑换卡</td>
<td><code>void grantToken(String bindMobileNumber, String cardId)</code></td>
</tr>
</tbody></table>
<p>分析接口:</p>
<ul>
<li>三个接口的返回类型不同,对象类型、布尔类型、还有不反悔类型</li>
<li>入参不同，发放优惠券需要防重、兑换卡需要卡id、实物商品需要发货的位置等</li>
<li>另外可能会随着业务的发展，会增加其他的商品类型，因为你所有的开发需求都是随着市场的拓展而带来的</li>
</ul>
<h2 id="简单的实现"><a href="#简单的实现" class="headerlink" title="简单的实现"></a>简单的实现</h2><ol>
<li><p>工程目录</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">├─src</span><br><span class="line">│  ├─main</span><br><span class="line">│  │  └─java</span><br><span class="line">│  │      └─org</span><br><span class="line">│  │          └─itstack</span><br><span class="line">│  │              └─demo</span><br><span class="line">│  │                  └─design</span><br><span class="line">│  │                          AwardReq.java</span><br><span class="line">│  │                          AwardRes.java</span><br><span class="line">│  │                          PrizeController.java</span><br><span class="line">│  │</span><br><span class="line">│  └─test</span><br><span class="line">│      └─java</span><br><span class="line">│          └─org</span><br><span class="line">│              └─itstack</span><br><span class="line">│                  └─demo</span><br><span class="line">│                      └─test</span><br><span class="line">│                             ApiTest.java</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>工程结构上非常简单,一个入参对象<code>AwardReq</code>、一个出参对象<code>AwardRes</code>,以及一个接口类<code>PrizeController</code></li>
</ul>
</li>
<li><p><code>ifelse</code>实现需求</p>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">PrizeController</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Logger logger = LoggerFactory.getLogger(PrizeController.class);</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> AwardRes <span class="title">awardToUser</span><span class="params">(AwardReq req)</span> </span>&#123;</span><br><span class="line">        String reqJson = JSON.toJSONString(req);</span><br><span class="line">        AwardRes awardRes = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            logger.info(<span class="string">&quot;奖品发放开始&#123;&#125;。req:&#123;&#125;&quot;</span>, req.getuId(), reqJson);</span><br><span class="line">            <span class="comment">// 按照不同类型方法商品[1优惠券、2实物商品、3第三方兑换卡(爱奇艺)]</span></span><br><span class="line">            <span class="keyword">if</span> (req.getAwardType() == <span class="number">1</span>) &#123;</span><br><span class="line">                CouponService couponService = <span class="keyword">new</span> CouponService();</span><br><span class="line">                CouponResult couponResult = couponService.sendCoupon(req.getuId(), req.getAwardNumber(), req.getBizId());</span><br><span class="line">                <span class="keyword">if</span> (<span class="string">&quot;0000&quot;</span>.equals(couponResult.getCode())) &#123;</span><br><span class="line">                    awardRes = <span class="keyword">new</span> AwardRes(<span class="string">&quot;0000&quot;</span>, <span class="string">&quot;发放成功&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    awardRes = <span class="keyword">new</span> AwardRes(<span class="string">&quot;0001&quot;</span>, couponResult.getInfo());</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (req.getAwardType() == <span class="number">2</span>) &#123;</span><br><span class="line">                GoodsService goodsService = <span class="keyword">new</span> GoodsService();</span><br><span class="line">                DeliverReq deliverReq = <span class="keyword">new</span> DeliverReq();</span><br><span class="line">                deliverReq.setUserName(queryUserName(req.getuId()));</span><br><span class="line">                deliverReq.setUserPhone(queryUserPhoneNumber(req.getuId()));</span><br><span class="line">                deliverReq.setSku(req.getAwardNumber());</span><br><span class="line">                deliverReq.setOrderId(req.getBizId());</span><br><span class="line">                deliverReq.setConsigneeUserName(req.getExtMap().get(<span class="string">&quot;consigneeUserName&quot;</span>));</span><br><span class="line">                deliverReq.setConsigneeUserPhone(req.getExtMap().get(<span class="string">&quot;consigneeUserPhone&quot;</span>));</span><br><span class="line">                deliverReq.setConsigneeUserAddress(req.getExtMap().get(<span class="string">&quot;consigneeUserAddress&quot;</span>));</span><br><span class="line">                Boolean isSuccess = goodsService.deliverGoods(deliverReq);</span><br><span class="line">                <span class="keyword">if</span> (isSuccess) &#123;</span><br><span class="line">                    awardRes = <span class="keyword">new</span> AwardRes(<span class="string">&quot;0000&quot;</span>, <span class="string">&quot;发放成功&quot;</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    awardRes = <span class="keyword">new</span> AwardRes(<span class="string">&quot;0001&quot;</span>, <span class="string">&quot;发放失败&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (req.getAwardType() == <span class="number">3</span>) &#123;</span><br><span class="line">                String bindMobileNumber = queryUserPhoneNumber(req.getuId());</span><br><span class="line">                IQiYiCardService iQiYiCardService = <span class="keyword">new</span> IQiYiCardService();</span><br><span class="line">                iQiYiCardService.grantToken(bindMobileNumber, req.getAwardNumber());</span><br><span class="line">                awardRes = <span class="keyword">new</span> AwardRes(<span class="string">&quot;0000&quot;</span>, <span class="string">&quot;发放成功&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            logger.info(<span class="string">&quot;奖品发放完成&#123;&#125;。&quot;</span>, req.getuId());</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            logger.error(<span class="string">&quot;奖品发放失败&#123;&#125;。req:&#123;&#125;&quot;</span>, req.getuId(), reqJson, e);</span><br><span class="line">            awardRes = <span class="keyword">new</span> AwardRes(<span class="string">&quot;0001&quot;</span>, e.getMessage());</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> awardRes;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">queryUserName</span><span class="params">(String uId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;花花&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">queryUserPhoneNumber</span><span class="params">(String uId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;15200101232&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>以上的代码就是典型的使用<code>ifelse</code>非常直接的实现出来的业务需求的一坨代码,如何仅从业务的角度看,研发如期甚至提前实现了功能</li>
<li>那这样的代码目前来看没有什么问题,但是经过几次迭代和拓展,接手这段代码的研发将会十分的痛苦,重构成本高,需要整理之前每一个接口的使用,测试回归验证时间长,需要全部验证一次,这就是很多人不愿意接受别人的代码,如果接手了 又要被压榨开发时间,那么可想而知这样的<code>ifelse</code>还会不停的增加.</li>
</ul>
<p>##　使用工厂模式重构</p>
<ol>
<li>目录结构</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">├─src</span><br><span class="line">│  ├─main</span><br><span class="line">│  │  └─java</span><br><span class="line">│  │      └─org</span><br><span class="line">│  │          └─itstack</span><br><span class="line">│  │              └─demo</span><br><span class="line">│  │                  └─design</span><br><span class="line">│  │                      │  StoreFactory.java</span><br><span class="line">│  │                      │</span><br><span class="line">│  │                      └─store</span><br><span class="line">│  │                          │  ICommodity.java</span><br><span class="line">│  │                          │</span><br><span class="line">│  │                          └─impl</span><br><span class="line">│  │                                  CardCommodityService.java</span><br><span class="line">│  │                                  CouponCommodityService.java</span><br><span class="line">│  │                                  GoodsCommodityService.java</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>首先，从上面的工程结构中，他看上去更加清晰了，更加明确每一个类所拥有的功能</li>
</ul>
<ol start="2">
<li><p>代码实现</p>
<p>2.1 定义发奖类接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">ICommodity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">sendCommodity</span><span class="params">(String uId, String commodityId, String bizId, Map&lt;String, String&gt; extMap)</span> <span class="keyword">throws</span> Exception</span>;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>所有的奖品无论是实物还是虚拟物品，都需要实现此接口进行处理，以保证最终入参的统一性</li>
<li>接口的入参包括：<code>用户ID</code>,<code>奖品ID</code>,<code>业务ID</code>以及<code>扩展字段</code>用于处理发放事务商品时收货的地址等信息</li>
</ul>
<p>2.2 实现奖品发放接口</p>
<p>优惠券</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CouponCommodityService</span> <span class="keyword">implements</span> <span class="title">ICommodity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Logger logger = LoggerFactory.getLogger(CouponCommodityService.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> CouponService couponService = <span class="keyword">new</span> CouponService();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendCommodity</span><span class="params">(String uId, String commodityId, String bizId, Map&lt;String, String&gt; extMap)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        CouponResult couponResult = couponService.sendCoupon(uId, commodityId, bizId);</span><br><span class="line">        logger.info(<span class="string">&quot;请求参数[优惠券] =&gt; uId：&#123;&#125; commodityId：&#123;&#125; bizId：&#123;&#125; extMap：&#123;&#125;&quot;</span>, uId, commodityId, bizId, JSON.toJSON(extMap));</span><br><span class="line">        logger.info(<span class="string">&quot;测试结果[优惠券]：&#123;&#125;&quot;</span>, JSON.toJSON(couponResult));</span><br><span class="line">        <span class="keyword">if</span> (!<span class="string">&quot;0000&quot;</span>.equals(couponResult.getCode())) <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(couponResult.getInfo());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>爱奇艺</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CardCommodityService</span> <span class="keyword">implements</span> <span class="title">ICommodity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Logger logger = LoggerFactory.getLogger(CardCommodityService.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 模拟注入</span></span><br><span class="line">    <span class="keyword">private</span> IQiYiCardService iQiYiCardService = <span class="keyword">new</span> IQiYiCardService();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendCommodity</span><span class="params">(String uId, String commodityId, String bizId, Map&lt;String, String&gt; extMap)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        String mobile = queryUserMobile(uId);</span><br><span class="line">        iQiYiCardService.grantToken(mobile, bizId);</span><br><span class="line">        logger.info(<span class="string">&quot;请求参数[爱奇艺兑换卡] =&gt; uId：&#123;&#125; commodityId：&#123;&#125; bizId：&#123;&#125; extMap：&#123;&#125;&quot;</span>, uId, commodityId, bizId, JSON.toJSON(extMap));</span><br><span class="line">        logger.info(<span class="string">&quot;测试结果[爱奇艺兑换卡]：success&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">queryUserMobile</span><span class="params">(String uId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;15200101232&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>实物</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GoodsCommodityService</span> <span class="keyword">implements</span> <span class="title">ICommodity</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Logger logger = LoggerFactory.getLogger(GoodsCommodityService.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> GoodsService goodsService = <span class="keyword">new</span> GoodsService();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendCommodity</span><span class="params">(String uId, String commodityId, String bizId, Map&lt;String, String&gt; extMap)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        DeliverReq deliverReq = <span class="keyword">new</span> DeliverReq();</span><br><span class="line">        deliverReq.setUserName(queryUserName(uId));</span><br><span class="line">        deliverReq.setUserPhone(queryUserPhoneNumber(uId));</span><br><span class="line">        deliverReq.setSku(commodityId);</span><br><span class="line">        deliverReq.setOrderId(bizId);</span><br><span class="line">        deliverReq.setConsigneeUserName(extMap.get(<span class="string">&quot;consigneeUserName&quot;</span>));</span><br><span class="line">        deliverReq.setConsigneeUserPhone(extMap.get(<span class="string">&quot;consigneeUserPhone&quot;</span>));</span><br><span class="line">        deliverReq.setConsigneeUserAddress(extMap.get(<span class="string">&quot;consigneeUserAddress&quot;</span>));</span><br><span class="line"></span><br><span class="line">        Boolean isSuccess = goodsService.deliverGoods(deliverReq);</span><br><span class="line"></span><br><span class="line">        logger.info(<span class="string">&quot;请求参数[优惠券] =&gt; uId：&#123;&#125; commodityId：&#123;&#125; bizId：&#123;&#125; extMap：&#123;&#125;&quot;</span>, uId, commodityId, bizId, JSON.toJSON(extMap));</span><br><span class="line">        logger.info(<span class="string">&quot;测试结果[优惠券]：&#123;&#125;&quot;</span>, isSuccess);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!isSuccess) <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;实物商品发放失败&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">queryUserName</span><span class="params">(String uId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;花花&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> String <span class="title">queryUserPhoneNumber</span><span class="params">(String uId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;15200101232&quot;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>2.3 创建商品工厂</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StoreFactory</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> ICommodity <span class="title">getCommodityService</span><span class="params">(Integer commodityType)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">null</span> == commodityType) <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">1</span> == commodityType) <span class="keyword">return</span> <span class="keyword">new</span> CouponCommodityService();</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">2</span> == commodityType) <span class="keyword">return</span> <span class="keyword">new</span> GoodsCommodityService();</span><br><span class="line">        <span class="keyword">if</span> (<span class="number">3</span> == commodityType) <span class="keyword">return</span> <span class="keyword">new</span> CardCommodityService();</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> RuntimeException(<span class="string">&quot;不存在的商品服务类型&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>这里我们定义了一个商店的工厂类,在里面按照类型实现各种商品的服务,可以非常干净整洁的处理你的代码.后续增加的商品在这里扩展即可,如果你不喜欢<code>if</code>判断,也可以使用<code>switch</code>或<code>map</code>配置结构,会让代码更加干净.</li>
</ul>
</li>
</ol>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><ul>
<li>从上到下的优化来看,工厂方法模式并不复杂</li>
<li>工厂模式的优点,<code>避免创建者与具体的产品逻辑耦合</code>,<code>满足单一职责,每一个业务逻辑实现都在自己所属的类中完成</code>,<code>满足开闭原则,无需更改使用调用方法就可以在程序中引入新的产品类型</code>.</li>
<li>工厂模式的缺点:结合优点来看,这样也会带来一些问题, 比如有非常多的奖品类型,那么实现的子类会极速扩张,因此也需要使用其他的模式来进行优化,后面逐渐学到</li>
</ul>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/10/20/pageHelper/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="冯玮">
      <meta itemprop="description" content="以梦为马，明日天涯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冯玮的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/20/pageHelper/" class="post-title-link" itemprop="url">pageHelper</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-10-20 15:16:33 / 修改时间：15:17:03" itemprop="dateCreated datePublished" datetime="2020-10-20T15:16:33+08:00">2020-10-20</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="pageHelper-简介"><a href="#pageHelper-简介" class="headerlink" title="pageHelper 简介"></a>pageHelper 简介</h2><p>这是一个基于MyBatis开源的分页插件，使用非常方便，支持各种复杂的单表、多表分页查询，让你在写sql时无需考虑分页问题，PageHelper帮你搞定。</p>
<p>pageHelp官网网址 <a target="_blank" rel="noopener" href="https://pagehelper.github.io/">https://pagehelper.github.io/</a></p>
<h2 id="pageHelper-使用"><a href="#pageHelper-使用" class="headerlink" title="pageHelper 使用"></a>pageHelper 使用</h2><h3 id="1-打开idea新建springboot基本框架"><a href="#1-打开idea新建springboot基本框架" class="headerlink" title="1.打开idea新建springboot基本框架"></a>1.打开idea新建springboot基本框架</h3><p><img src="C:\Users\fengwei\AppData\Roaming\Typora\typora-user-images\image-20200602110639705.png" alt="image-20200602110639705"></p>
<h3 id="2-选择web框架、数据库驱动、等相关的依赖"><a href="#2-选择web框架、数据库驱动、等相关的依赖" class="headerlink" title="2.选择web框架、数据库驱动、等相关的依赖"></a>2.选择web框架、数据库驱动、等相关的依赖</h3><h3 id="3-导入mybatisplus、pagehelper依赖"><a href="#3-导入mybatisplus、pagehelper依赖" class="headerlink" title="3.导入mybatisplus、pagehelper依赖"></a>3.导入mybatisplus、pagehelper依赖</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.baomidou<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mybatis-plus-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.3.2<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.alibaba<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>druid<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.1.22<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 添加pagehelp插件--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>com.github.pagehelper<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>pagehelper-spring-boot-starter<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">version</span>&gt;</span>1.2.13<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="4-配置数据库"><a href="#4-配置数据库" class="headerlink" title="4.配置数据库"></a>4.配置数据库</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">spring.datasource.type</span>=<span class="string">com.alibaba.druid.pool.DruidDataSource</span></span><br><span class="line"><span class="meta">spring.datasource.driver-class-name</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="meta">spring.datasource.url</span>=<span class="string">jdbc:mysql://localhost:3306/ry-vue?useUnicode=true&amp;characterEncoding=utf8&amp;zeroDateTimeBehavior=convertToNull&amp;useSSL=true&amp;serverTimezone=GMT%2B8</span></span><br><span class="line"><span class="meta">spring.datasource.username</span>=<span class="string">root</span></span><br><span class="line"><span class="meta">spring.datasource.password</span>=<span class="string">root</span></span><br></pre></td></tr></table></figure>

<h3 id="5-配置pagehelper拦截器"><a href="#5-配置pagehelper拦截器" class="headerlink" title="5.配置pagehelper拦截器"></a>5.配置pagehelper拦截器</h3><figure class="highlight properties"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">############# 分页插件PageHelper配置 #############</span></span><br><span class="line"><span class="meta">pagehelper.helperDialect</span>:<span class="string">mysql</span></span><br><span class="line"><span class="meta">pagehelper.reasonable</span>:<span class="string">true</span></span><br><span class="line"><span class="meta">pagehelper.supportMethodsArguments</span>:<span class="string">true</span></span><br><span class="line"><span class="meta">pagehelper.params</span>:<span class="string">count=countSql</span></span><br></pre></td></tr></table></figure>

<h3 id="6-controller类"><a href="#6-controller类" class="headerlink" title="6.controller类"></a>6.controller类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.fengwei.controller;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.core.JsonProcessingException;</span><br><span class="line"><span class="keyword">import</span> com.fasterxml.jackson.databind.ObjectMapper;</span><br><span class="line"><span class="keyword">import</span> com.fengwei.dao.UserDao;</span><br><span class="line"><span class="keyword">import</span> com.fengwei.entity.User;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.Page;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageHelper;</span><br><span class="line"><span class="keyword">import</span> com.github.pagehelper.PageInfo;</span><br><span class="line"><span class="keyword">import</span> org.springframework.beans.factory.annotation.Autowired;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RequestMapping;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.bind.annotation.RestController;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@RestController()</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">UserController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    <span class="keyword">private</span> UserDao dao;</span><br><span class="line">    <span class="keyword">private</span> ObjectMapper objectMapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line"></span><br><span class="line">    <span class="meta">@RequestMapping(&quot;/user&quot;)</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getList</span><span class="params">(<span class="keyword">int</span> pageNum, <span class="keyword">int</span> limit)</span> <span class="keyword">throws</span> JsonProcessingException </span>&#123;</span><br><span class="line">        <span class="comment">//1.通过调用PageHelp的静态方法开始获取分页数据</span></span><br><span class="line">        Page page = PageHelper.startPage(pageNum, limit);</span><br><span class="line">        <span class="comment">//2.获取人员的记录</span></span><br><span class="line">        List&lt;User&gt; users = dao.selectList(<span class="keyword">null</span>);</span><br><span class="line">        <span class="comment">//3.获取当前分页对象</span></span><br><span class="line">        PageInfo pageInfo = <span class="keyword">new</span> PageInfo&lt;User&gt;(users);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> objectMapper.writeValueAsString(pageInfo);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="7-User类"><a href="#7-User类" class="headerlink" title="7.User类"></a>7.User类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.fengwei.entity;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> lombok.AllArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.Data;</span><br><span class="line"><span class="keyword">import</span> lombok.NoArgsConstructor;</span><br><span class="line"><span class="keyword">import</span> lombok.ToString;</span><br><span class="line"><span class="keyword">import</span> lombok.experimental.Accessors;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Data</span></span><br><span class="line"><span class="meta">@AllArgsConstructor</span></span><br><span class="line"><span class="meta">@NoArgsConstructor</span></span><br><span class="line"><span class="meta">@ToString</span></span><br><span class="line"><span class="meta">@Accessors(chain = true)</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> Integer id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> Integer age;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="8-Dao层-这里我使用了mybatisplus-直接继承BaseMapper-就可以实现基本的增删改查"><a href="#8-Dao层-这里我使用了mybatisplus-直接继承BaseMapper-就可以实现基本的增删改查" class="headerlink" title="8.Dao层:这里我使用了mybatisplus   直接继承BaseMapper  就可以实现基本的增删改查"></a>8.Dao层:这里我使用了mybatisplus   直接继承BaseMapper  就可以实现基本的增删改查</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.fengwei.dao;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.baomidou.mybatisplus.core.mapper.BaseMapper;</span><br><span class="line"><span class="keyword">import</span> com.fengwei.entity.User;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">UserDao</span> <span class="keyword">extends</span> <span class="title">BaseMapper</span>&lt;<span class="title">User</span>&gt; </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="9-前端页面展示：element-ui-admin来实现"><a href="#9-前端页面展示：element-ui-admin来实现" class="headerlink" title="9.前端页面展示：element-ui-admin来实现"></a>9.前端页面展示：element-ui-admin来实现</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;app-container&quot;&gt;</span><br><span class="line">    &lt;el-table</span><br><span class="line">      :data&#x3D;&quot;list&quot;</span><br><span class="line">      border</span><br><span class="line">      fit</span><br><span class="line">      highlight-current-row</span><br><span class="line">      element-loading-text&#x3D;&quot;Loading&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;el-table-column align&#x3D;&quot;center&quot; label&#x3D;&quot;序号&quot; width&#x3D;&quot;95&quot;&gt;</span><br><span class="line">        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">          &#123;&#123; scope.$index + 1&#125;&#125;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line">      &lt;&#x2F;el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column align&#x3D;&quot;center&quot; label&#x3D;&quot;ID&quot; width&#x3D;&quot;95&quot;&gt;</span><br><span class="line">        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">          &#123;&#123; scope.row.id &#125;&#125;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line">      &lt;&#x2F;el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column align&#x3D;&quot;center&quot; label&#x3D;&quot;姓名&quot; width&#x3D;&quot;95&quot;&gt;</span><br><span class="line">        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">          &#123;&#123; scope.row.name &#125;&#125;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line">      &lt;&#x2F;el-table-column&gt;</span><br><span class="line"></span><br><span class="line">      &lt;el-table-column align&#x3D;&quot;center&quot; label&#x3D;&quot;年龄&quot; width&#x3D;&quot;95&quot;&gt;</span><br><span class="line">        &lt;template slot-scope&#x3D;&quot;scope&quot;&gt;</span><br><span class="line">          &#123;&#123; scope.row.age &#125;&#125;</span><br><span class="line">        &lt;&#x2F;template&gt;</span><br><span class="line">      &lt;&#x2F;el-table-column&gt;</span><br><span class="line">    &lt;&#x2F;el-table&gt;</span><br><span class="line">    &lt;pagination v-show&#x3D;&quot;total&gt;0&quot; :total&#x3D;&quot;total&quot; :page.sync&#x3D;&quot;listQuery.page&quot; :limit.sync&#x3D;&quot;listQuery.limit&quot; @pagination&#x3D;&quot;getList&quot; &#x2F;&gt;</span><br><span class="line">  &lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  import Pagination from &#39;@&#x2F;components&#x2F;Pagination&#39;</span><br><span class="line">  import VueAxios from &#39;vue-axios&#39;</span><br><span class="line">  import Vue from &#39;vue&#39;</span><br><span class="line">  import axios from &#39;axios&#39;</span><br><span class="line">  Vue.use(VueAxios,axios)</span><br><span class="line"></span><br><span class="line">  export default &#123;</span><br><span class="line">    components: &#123; Pagination &#125;,</span><br><span class="line">    data() &#123;</span><br><span class="line">      return &#123;</span><br><span class="line">        total: 0,</span><br><span class="line">        listQuery: &#123;</span><br><span class="line">          page: 1,</span><br><span class="line">          limit: 10</span><br><span class="line">        &#125;,</span><br><span class="line">        list: [</span><br><span class="line"></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods:&#123;</span><br><span class="line">      getList()&#123;</span><br><span class="line">        this.axios(&#123;</span><br><span class="line">          method:&#39;get&#39;,</span><br><span class="line">          url:&#39;http:&#x2F;&#x2F;localhost:8080&#x2F;user?pageNum&#x3D;&#39;+this.listQuery.page+&#39;&amp;limit&#x3D;&#39;+this.listQuery.limit</span><br><span class="line">        &#125;).then(resp&#x3D;&gt;&#123;</span><br><span class="line">          this.list &#x3D; resp.data.list;</span><br><span class="line">          this.total &#x3D; resp.data.total;</span><br><span class="line">        &#125;)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    created() &#123;</span><br><span class="line">      this.getList();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="10-前端访问后端会有跨域问题，解决方法如下"><a href="#10-前端访问后端会有跨域问题，解决方法如下" class="headerlink" title="10.前端访问后端会有跨域问题，解决方法如下"></a>10.前端访问后端会有跨域问题，解决方法如下</h3><p>在springboot中加入配置类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.fengwei;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Bean;</span><br><span class="line"><span class="keyword">import</span> org.springframework.context.annotation.Configuration;</span><br><span class="line"><span class="keyword">import</span> org.springframework.http.HttpHeaders;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.CorsRegistry;</span><br><span class="line"><span class="keyword">import</span> org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 跨域配置  vue前端跨域访问</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CorsConfig</span> <span class="keyword">implements</span> <span class="title">WebMvcConfigurer</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> WebMvcConfigurer <span class="title">corsConfigurer</span><span class="params">()</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> WebMvcConfigurer() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addCorsMappings</span><span class="params">(CorsRegistry registry)</span> </span>&#123;</span><br><span class="line">                registry.addMapping(<span class="string">&quot;/**&quot;</span>).</span><br><span class="line">                        allowedOrigins(<span class="string">&quot;*&quot;</span>). <span class="comment">//允许跨域的域名，可以用*表示允许任何域名使用</span></span><br><span class="line">                        allowedMethods(<span class="string">&quot;*&quot;</span>). <span class="comment">//允许任何方法（post、get等）</span></span><br><span class="line">                        allowedHeaders(<span class="string">&quot;*&quot;</span>). <span class="comment">//允许任何请求头</span></span><br><span class="line">                        allowCredentials(<span class="keyword">true</span>). <span class="comment">//带上cookie信息</span></span><br><span class="line">                        exposedHeaders(HttpHeaders.SET_COOKIE).maxAge(<span class="number">3600L</span>); <span class="comment">//maxAge(3600)表明在3600秒内，不需要再发送预检验请求，可以缓存该结果</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="11-前端实现效果"><a href="#11-前端实现效果" class="headerlink" title="11.前端实现效果"></a>11.前端实现效果</h3><p><img src="C:\Users\fengwei\AppData\Roaming\Typora\typora-user-images\image-20200602112351442.png" alt="image-20200602112351442"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/10/20/centos%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="冯玮">
      <meta itemprop="description" content="以梦为马，明日天涯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冯玮的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/20/centos%E8%99%9A%E6%8B%9F%E6%9C%BA%E5%AE%89%E8%A3%85/" class="post-title-link" itemprop="url">centos虚拟机安装</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              

              <time title="创建时间：2020-10-20 15:06:52 / 修改时间：15:09:30" itemprop="dateCreated datePublished" datetime="2020-10-20T15:06:52+08:00">2020-10-20</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h3 id="一、CentOS7-4下载"><a href="#一、CentOS7-4下载" class="headerlink" title="一、CentOS7.4下载"></a>一、CentOS7.4下载</h3><p>​     官网下载地址：<a target="_blank" rel="noopener" href="http://vault.centos.org/">http://vault.centos.org/</a></p>
<p>  1、进入CentOS下载官网，找到CentOS7.4版本</p>
<p><img src="https://img-blog.csdnimg.cn/20181112161239784.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p> 2、在CentOS7.4版本页面中，找到isos/</p>
<p><img src="https://img-blog.csdnimg.cn/20181112161503341.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>  3、进入页面后，可以看到x86_64</p>
<p><img src="https://img-blog.csdnimg.cn/2018111216180736.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p> 4、在CentOS下载页面中，选择 CentOS-7-x86_64-DVD-1708.torrent进行下载</p>
<p><img src="https://img-blog.csdnimg.cn/20181112162307215.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>5、下载完成之后，由于“CentOS-7-x86_64-DVD-1708.torrent”只是一个BT种子文件，而且非常小，这就需要我们使用迅雷等工具来对源镜像进行下载了</p>
<p>  （1）打开迅雷，新建任务，把“CentOS-7-x86_64-DVD-1708.torrent”BT种子文件拖入到新建任务中，并点击立即下载</p>
<p><img src="https://img-blog.csdnimg.cn/20181112162942853.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>  （2）下载完成之后会生成如下的几个文件，CentOS-7-x86_64-DVD-1708.iso就是我们在工作中使用的镜像了</p>
<p><img src="https://img-blog.csdnimg.cn/20181112163208507.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<h3 id="二、CentOS7-4安装"><a href="#二、CentOS7-4安装" class="headerlink" title="二、CentOS7.4安装"></a>二、CentOS7.4安装</h3><p>  1、打开你的VMware Workstation Pro，并点击“创建新的虚拟机”，没有安装VMware Workstation Pro请点击<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_39135287/article/details/82924547">VMware Workstation 14下载与安装</a></p>
<p><img src="https://img-blog.csdnimg.cn/20181112163425986.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>2、点选典型(推荐)(T)，并点击“下一步”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112163607593.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>3、点选稍后安装操作系统(S)，并点击“下一步”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112163858190.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>4、点选Linux(L)，因为我们之前下载的 CentOS-7-x86_64-DVD-1708.iso 是64位 7.4版本的，所以这里我们选择CentOS 7 64位，并点击“下一步”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112164504835.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>5、虚拟机名称可以更改也可以不更改看自己需求，修改虚拟机的安装路径，并点击“下一步”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112165100926.jpg?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>6、磁盘选择默认为20.0GB，点选将虚拟磁盘存储为单个文件(O)，并点击“下一步”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112170051641.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>7、点击“完成”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112170232395.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>8、点击“编辑虚拟机设置”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112170724106.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>9、点选“使用ISO映像文件(M)”，并添加我们之前下载好的CentOS-7-x86_64-DVD-1708.iso</p>
<p><img src="https://img-blog.csdnimg.cn/20181112171601333.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>10、默认为NAT 模式(N)：用于共享主机的IP地址即可</p>
<p><img src="https://img-blog.csdnimg.cn/20200229110353396.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>提示：11-13步骤 移除USB控制器、声卡和打印机 只是为了腾出更多的资源空间 (可以选择跳过 不移除)</p>
<p>11、选择USB 控制器，并点击“移除(R)”</p>
<p><img src="https://img-blog.csdnimg.cn/20200229110601994.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>12、选择声卡，并点击“移除(R)”</p>
<p><img src="https://img-blog.csdnimg.cn/20200229110744352.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>13、选择打印机，并点击“移除(R)”，最后点击“确定”</p>
<p><img src="https://img-blog.csdnimg.cn/20200229110954940.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>14、点击“开启此虚拟机”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112173512558.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>15、正在开启虚拟机，鼠标移入到虚拟机中，并按下“↑”键，选择Install CentOS 7，最后按下“Enter 键”</p>
<p>​    提示： 鼠标移动到虚拟机内部单击或者按下Ctrl + G，鼠标即可移入到虚拟机中</p>
<p>​           按下Ctrl + Alt，鼠标即可移出虚拟机</p>
<p>​    注意： 在虚拟机中的操作，鼠标必须要移入到虚拟机中，否则虚拟机感应不到，无法对其进行操作</p>
<p><img src="https://img-blog.csdnimg.cn/20181112174017753.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>16、按下“Enter 键”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112174532637.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><img src="https://img-blog.csdnimg.cn/20181112174720796.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>17、默认安装过程中的安装界面使用English (英语)，点击“Continue”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112175459759.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>18、配置时区 (DATE &amp; TIME)</p>
<p>​    （1）选择DATE &amp; TIME</p>
<p><img src="https://img-blog.csdnimg.cn/20181112181108477.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>​    </p>
<p>​    （2）时区设置为 Region：Asia  City：Shanghai</p>
<p>​        日期和时间 设置与自己的电脑时间同步，最后点击“Done”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112180745997.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>19、设置软件选择 (SOFTWARE SELECTION)</p>
<p>​     （1）选择SOFTWARE SELECTION</p>
<p><img src="https://img-blog.csdnimg.cn/20181112182226669.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>​    </p>
<p>​    （2）点击勾选 Compatibility Libraries 和 Development Tools</p>
<p><img src="https://img-blog.csdnimg.cn/20181112182812677.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>如果希望安装带有界面的CentOS，请在左边Base Environment中，选择Server with GUI(带图形用户界面的服务器)，默认为Minimal Install (最小安装)，提示：如果安装有界面版本的，在如下的第22步骤中的操作会有所不同 (安装有界面版本的其实用处不大，都是可以通过命令行来设置的)，这里我没有安装有界面版本的</p>
<p><img src="https://img-blog.csdnimg.cn/20200229113355475.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>20、设置安装位置 (INSTALLATION DESTINATION)</p>
<p>   （1）选择INSTALLATION DESTINATION</p>
<p><img src="https://img-blog.csdnimg.cn/20181112184330599.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>  （2）点选 I will configuire parttioning，然后再点击“Done”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112184709136.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p> （3）更改模式，标准分区Standard Partition，点击“+”按钮添加分区</p>
<p><img src="https://img-blog.csdnimg.cn/20181112185430852.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>（4）添加 /boot分区，大小300MB，Add mount point</p>
<p><img src="https://img-blog.csdnimg.cn/20181112185658156.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><img src="https://img-blog.csdnimg.cn/2018111218572297.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>（5）添加 swap分区，一般情况是物理内存的2倍大小，用于物理内存不足时使用，但可能造成系统不稳定，所以看情况，可以设置小一点，甚至设置为0MB，这里我设置为512MB，Add mount point</p>
<p><img src="https://img-blog.csdnimg.cn/20181112190216274.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><img src="https://img-blog.csdnimg.cn/201811121902269.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>（6）增加根分区，不填写大小，即默认剩余的空间都给根分区，Add mount point</p>
<p><img src="https://img-blog.csdnimg.cn/20181112190725296.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><img src="https://img-blog.csdnimg.cn/20181112190734886.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>（7）点击“Done”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112190941821.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>（8）点击“Accept Changes”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112191203212.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>21、点击“Begin Installation”，开始安装</p>
<p><img src="https://img-blog.csdnimg.cn/20181112191554323.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>22、设置系统用户root的密码 (ROOT PASSWORD)</p>
<p>  （1）选择ROOT PASSWORD</p>
<p><img src="https://img-blog.csdnimg.cn/2018111219203432.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>（2）为root设置密码 (密码长度最好不要小于6位数)，然后点击“Done”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112192438774.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>23、等待安装完成，然后点击“Reboot”</p>
<p><img src="https://img-blog.csdnimg.cn/20181112193200108.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<h3 id="三、CentOS7-4基本设置"><a href="#三、CentOS7-4基本设置" class="headerlink" title="三、CentOS7.4基本设置"></a>三、CentOS7.4基本设置</h3><p><strong>1、登录CentOS，默认账号为root，密码为 你在前面安装时设置的root密码</strong></p>
<p><strong>提示：在输入密码时，linux为了安全起见，是看不到你输入的密码。同时，如果是使用的是键盘右边的数字键盘输入密码的话，建议查看一下，数字键盘是否开启 (建议使用字母按键上面一排的 数字键输入密码)</strong></p>
<p><img src="https://img-blog.csdnimg.cn/20200229122603642.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><strong>2、配置IP地址，网关</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/sysconfig/network-scripts/    //进入到network-scripts目录下  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">vi ifcfg-ens32  //编辑配置文件 </span><br><span class="line"></span><br><span class="line">//修改以下内容</span><br><span class="line"></span><br><span class="line">BOOTPROTO=static  //启用静态IP地址</span><br><span class="line">ONBOOT=yes      //开启自动启用网络连接</span><br><span class="line"></span><br><span class="line">//添加以下内容</span><br><span class="line">IPADDR=192.168.30.1      //设置IP地址</span><br><span class="line">NETMASK=255.255.255.0   //子网掩码</span><br><span class="line">GATEWAY=192.168.131.2   //设置网关</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200229123200521.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><img src="https://img-blog.csdnimg.cn/20200229123856473.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>2.1、如何设置Linux的IP地址</p>
<p>1、在本地电脑打开“命令行窗口”，输入命令ipconfig，查看 以太网适配器 VMware Network Adapter VMnet8下的IPv4 地址</p>
<p>2、可以看到 以太网适配器 VMware Network Adapter VMnet8下的IPv4 地址为 192.168.30.2</p>
<p>3、当我们设置Linux的IP地址时，需要保证Linux的IP地址 与 VMnet8下的IPv4地址 的前面三位数必须相同，即 192.168.30 必须相同，这样Linux就能跟我们本地电脑互相通信，最后一位数不相同即可，例如Linux的IP地址可以设置为192.168.30.1 或者 192.168.30.124等</p>
<p><img src="https://img-blog.csdnimg.cn/20190824182436514.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>2.2、如何设置Linux的网关：</p>
<p>1、点击编辑(E) → 虚拟网络编辑器(N)</p>
<p><img src="https://img-blog.csdnimg.cn/20181114180316562.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p> 2.3、如何设置Linux的网关，选择VMnet8，再点击”NAT设置”按钮，查看VMnet8 (NAT 模式)下的子网掩码</p>
<p><img src="https://img-blog.csdnimg.cn/20181114180631782.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><img src="https://img-blog.csdnimg.cn/20190824183728116.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>3、查看VMnet8 (NAT 模式)下的网关，选择VMnet8，再点击”NAT设置”按钮</p>
<p><img src="https://img-blog.csdnimg.cn/20181114181049708.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>3、重启网络服务</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service network restart</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20181112224709932.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>4、设置DNS地址   </p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/resolv.conf    //编辑 resolv.conf文件</span><br><span class="line"></span><br><span class="line">nameserver 114.114.114.114   //添加DNS地址</span><br><span class="line"></span><br><span class="line">可以添加多个DNS地址，格式为：</span><br><span class="line">nameserver xxx1.xxx1.xxx1.xxx1</span><br><span class="line">nameserver xxx2.xxx2.xxx2.xxx2</span><br><span class="line">常用的DNS地址:</span><br><span class="line"> 阿里  223.5.5.5  或者  223.6.6.6</span><br><span class="line"> 谷歌  8.8.8.8</span><br><span class="line"> 国内移动、电信和联通通用的DNS  114.114.114.114</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20181112230257536.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>提示：如果是内网，配置上面的DNS地址有可能是访问不了外网的，在电脑右下角的网络图标中鼠标右键，选择打开”网络和Internet”设置，选择WLAN，然后在点击你连接的网络，查看网络信息</p>
<p><img src="https://img-blog.csdnimg.cn/20200229130402386.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>填写内网的IPv4 DNS 服务器地址即可</p>
<p><img src="https://img-blog.csdnimg.cn/20200229130655666.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>5、查看是否能够访问外网</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ping -c3 www.baidu.com</span><br><span class="line"></span><br><span class="line">PING www.a.shifen.com (14.215.177.38) 56(84) bytes of data.</span><br><span class="line"></span><br><span class="line">64 bytes from 14.215.177.38 (14.215.177.38): icmp_seq=1 ttl=128 time=9.45 ms</span><br><span class="line">64 bytes from 14.215.177.38 (14.215.177.38): icmp_seq=2 ttl=128 time=12.2 ms</span><br><span class="line">64 bytes from 14.215.177.38 (14.215.177.38): icmp_seq=3 ttl=128 time=9.29 ms</span><br><span class="line"></span><br><span class="line">--- www.a.shifen.com ping statistics ---</span><br><span class="line"></span><br><span class="line">3 packets transmitted, 3 received, 0% packet loss, time 2004ms</span><br><span class="line"></span><br><span class="line">rtt min/avg/max/mdev = 9.296/10.346/12.293/1.388 ms</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20200229125417688.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>6、永久关闭 firewalld防火墙（centos7默认的防火墙是firewalld防火墙，不是使用iptables，因此需要关闭firewalld服务）</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl stop firewalld.service  // 停止firewalld服务</span><br><span class="line">systemctl <span class="built_in">disable</span> firewalld.service // 开机禁用firewalld服务</span><br><span class="line">iptables -L   //列出所有iptables规则</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20181113001448743.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>7、永久关闭SELinux防火墙</p>
<figure class="highlight powershell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">vi /etc/sysconfig/selinux       //编辑selinux文件</span><br><span class="line">SELINUX=disabled         //把文件中的SELINUX=enforcing 改成 SELINUX=disabled 即可</span><br><span class="line">sestatus    //查看SELinux状态</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20181114102457122.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>获取当前selinux防火墙的安全策略</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sestatus</span><br></pre></td></tr></table></figure>

<p>可以看到当前selinux防火墙的安全策略仍为enforcing，配置文件并未生效</p>
<p><img src="https://img-blog.csdnimg.cn/20181114104958342.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>这时需要我们重启，再去查看SELinux防火墙的状态，可以看到已经关闭了</p>
<p><img src="https://img-blog.csdnimg.cn/2018111411401675.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>8、给/etc/rc.d/rc.local 文件设置 “x”可执行权限，最初设置默认是没有可执行权限的</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">chmod +x /etc/rc.d/rc.local     //设置可执行权限</span><br><span class="line"></span><br><span class="line">//设置前</span><br><span class="line">-rwxr-xr--. 1 root root 473 Aug  5  2017 rc.local</span><br><span class="line">//设置后</span><br><span class="line">-rwxr-xr-x. 1 root root 473 Aug  5  2017 rc.local</span><br></pre></td></tr></table></figure>

<p><img src="https://img-blog.csdnimg.cn/20181113003426734.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p>9、输入“halt”，关闭虚拟机，并拍摄快照，保存当前配置</p>
<p><img src="https://img-blog.csdnimg.cn/20181113001706140.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>
<p><img src="https://img-blog.csdnimg.cn/20181113001901947.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM5MTM1Mjg3,size_16,color_FFFFFF,t_70" alt="img"></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  

      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2020/10/20/hello-world/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="冯玮">
      <meta itemprop="description" content="以梦为马，明日天涯">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="冯玮的博客">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2020/10/20/hello-world/" class="post-title-link" itemprop="url">Hello World</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2020-10-20 13:58:48" itemprop="dateCreated datePublished" datetime="2020-10-20T13:58:48+08:00">2020-10-20</time>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">冯玮</p>
  <div class="site-description" itemprop="description">以梦为马，明日天涯</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives">
          <span class="site-state-item-count">9</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-tags">
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">标签</span>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">冯玮</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://muse.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
